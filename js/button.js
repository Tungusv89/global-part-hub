!function(){"use strict";var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function F(t,e){return t(e={exports:{}},e.exports),e.exports}var R="object"==typeof E&&E&&E.Object===Object&&E,t="object"==typeof self&&self&&self.Object===Object&&self,i=R||t||Function("return this")(),t=i.Symbol;var P=function(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o},u=Array.isArray,e=Object.prototype,H=e.hasOwnProperty,z=e.toString,D=t?t.toStringTag:void 0;var V=function(t){var e=H.call(t,D),n=t[D];try{var i=!(t[D]=void 0)}catch(t){}var o=z.call(t);return i&&(e?t[D]=n:delete t[D]),o},U=Object.prototype.toString;var G=function(t){return U.call(t)},W=t?t.toStringTag:void 0;var n=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(W&&W in Object(t)?V:G)(t)};var s=function(t){return null!=t&&"object"==typeof t};var Z=function(t){return"symbol"==typeof t||s(t)&&"[object Symbol]"==n(t)},e=t?t.prototype:void 0,K=e?e.toString:void 0;var q=function t(e){var n;return"string"==typeof e?e:u(e)?P(e,t)+"":Z(e)?K?K.call(e):"":"0"==(n=e+"")&&1/e==-1/0?"-0":n};var Y=function(t){return null==t?"":q(t)};var X=function(t,e,n){for(var i=-1,o=t.length,r=((n=o<n?o:n)<0&&(n+=o),o=n<(e=e<0?o<-e?0:o+e:e)?0:n-e>>>0,e>>>=0,Array(o));++i<o;)r[i]=t[i+e];return r};var J=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&i<=n?t:X(t,e,n)},$=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Q=function(t){return $.test(t)};var tt=function(t){return t.split("")},e="\\ud800-\\udfff",o="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",e="[^"+e+"]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",h="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",d="[\\ufe0e\\ufe0f]?",d=d+h+("(?:\\u200d(?:"+[e,c,l].join("|")+")"+d+h+")*"),h="(?:"+[e+r+"?",r,c,l,o].join("|")+")",et=RegExp(a+"(?="+a+")|"+h+d,"g");var nt=function(t){return t.match(et)||[]};var it=function(t){return(Q(t)?nt:tt)(t)};var ot=function(i){return function(t){t=Y(t);var e=Q(t)?it(t):void 0,n=e?e[0]:t.charAt(0),e=e?J(e,1).join(""):t.slice(1);return n[i]()+e}}("toUpperCase");var rt=function(t){return ot(Y(t).toLowerCase())};var st=function(t,e){for(var n=-1,i=null==t?0:t.length,o=0,r=[];++n<i;){var s=t[n];e(s,n,t)&&(r[o++]=s)}return r};var at=function(c){return function(t,e,n){for(var i=-1,o=Object(t),r=n(t),s=r.length;s--;){var a=r[c?s:++i];if(!1===e(o[a],a,o))break}return t}}();var ct=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i};var e=function(t){return s(t)&&"[object Arguments]"==n(t)},r=Object.prototype,lt=r.hasOwnProperty,ht=r.propertyIsEnumerable,ut=e(function(){return arguments}())?e:function(t){return s(t)&&lt.call(t,"callee")&&!ht.call(t,"callee")};function dt(){return!1}var pt=F(function(t,e){var e=e&&!e.nodeType&&e,n=e&&t&&!t.nodeType&&t,n=n&&n.exports===e?i.Buffer:void 0,e=n?n.isBuffer:void 0;t.exports=e||dt}),ft=/^(?:0|[1-9]\d*)$/;var mt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ft.test(t))&&-1<t&&t%1==0&&t<e};var gt=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p["[object Arguments]"]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p["[object Function]"]=p["[object Map]"]=p["[object Number]"]=p["[object Object]"]=p["[object RegExp]"]=p["[object Set]"]=p["[object String]"]=p["[object WeakMap]"]=!1;function vt(t){return s(t)&&gt(t.length)&&!!p[n(t)]}var c=function(e){return function(t){return e(t)}},l=F(function(t,e){var e=e&&!e.nodeType&&e,n=e&&t&&!t.nodeType&&t,i=n&&n.exports===e&&R.process,e=function(){try{var t=n&&n.require&&n.require("util").types;return t?t:i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=e}),o=l&&l.isTypedArray,_t=o?c(o):vt,yt=Object.prototype.hasOwnProperty;var bt=function(t,e){var n,i=u(t),o=!i&&ut(t),r=!i&&!o&&pt(t),s=!i&&!o&&!r&&_t(t),a=i||o||r||s,c=a?ct(t.length,String):[],l=c.length;for(n in t)!e&&!yt.call(t,n)||a&&("length"==n||r&&("offset"==n||"parent"==n)||s&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||mt(n,l))||c.push(n);return c},wt=Object.prototype;var Ct=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||wt)};var kt=function(e,n){return function(t){return e(n(t))}}(Object.keys,Object),It=Object.prototype.hasOwnProperty;var St=function(t){if(!Ct(t))return kt(t);var e,n=[];for(e in Object(t))It.call(t,e)&&"constructor"!=e&&n.push(e);return n};var _=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var At=function(t){return!!_(t)&&("[object Function]"==(t=n(t))||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t)};var f=function(t){return null!=t&&gt(t.length)&&!At(t)};var m=function(t){return(f(t)?bt:St)(t)};var Ot=function(r,s){return function(t,e){if(null!=t){if(!f(t))return r(t,e);for(var n=t.length,i=s?n:-1,o=Object(t);(s?i--:++i<n)&&!1!==e(o[i],i,o););}return t}}(function(t,e){return t&&at(t,e,m)});function Et(t,i){var o=[];return Ot(t,function(t,e,n){i(t,e,n)&&o.push(t)}),o}var Mt=function(t,e){return t===e||t!=t&&e!=e};var xt=function(t,e){for(var n=t.length;n--;)if(Mt(t[n][0],e))return n;return-1},Lt=Array.prototype.splice;function Tt(t){var e=this.__data__;return!((t=xt(e,t))<0||(t==e.length-1?e.pop():Lt.call(e,t,1),--this.size,0))}function jt(t){var e=this.__data__;return(t=xt(e,t))<0?void 0:e[t][1]}function Nt(t){return-1<xt(this.__data__,t)}function Bt(t,e){var n=this.__data__,i=xt(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function g(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}g.prototype.clear=function(){this.__data__=[],this.size=0},g.prototype.delete=Tt,g.prototype.get=jt,g.prototype.has=Nt,g.prototype.set=Bt;var Ft=g;function Rt(){this.__data__=new Ft,this.size=0}function Pt(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t}function Ht(t){return this.__data__.get(t)}function zt(t){return this.__data__.has(t)}var a=i["__core-js_shared__"],Dt=(h=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"";var Vt=function(t){return!!Dt&&Dt in t},Ut=Function.prototype.toString;var v=function(t){if(null!=t){try{return Ut.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Gt=/^\[object .+?Constructor\]$/,d=Function.prototype,r=Object.prototype,e=d.toString,l=r.hasOwnProperty,Wt=RegExp("^"+e.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Zt=function(t){return!(!_(t)||Vt(t))&&(At(t)?Wt:Gt).test(v(t))};var Kt=function(t,e){return null==t?void 0:t[e]};var y=function(t,e){return t=Kt(t,e),Zt(t)?t:void 0},qt=y(i,"Map"),Yt=y(Object,"create");function Xt(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t}var Jt=Object.prototype.hasOwnProperty;function $t(t){var e,n=this.__data__;return Yt?"__lodash_hash_undefined__"===(e=n[t])?void 0:e:Jt.call(n,t)?n[t]:void 0}var Qt=Object.prototype.hasOwnProperty;function te(t){var e=this.__data__;return Yt?void 0!==e[t]:Qt.call(e,t)}function ee(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Yt&&void 0===e?"__lodash_hash_undefined__":e,this}function b(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}b.prototype.clear=function(){this.__data__=Yt?Yt(null):{},this.size=0},b.prototype.delete=Xt,b.prototype.get=$t,b.prototype.has=te,b.prototype.set=ee;var ne=b;var ie=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var oe=function(t,e){return t=t.__data__,ie(e)?t["string"==typeof e?"string":"hash"]:t.map};function re(t){return t=oe(this,t).delete(t),this.size-=t?1:0,t}function se(t){return oe(this,t).get(t)}function ae(t){return oe(this,t).has(t)}function ce(t,e){var n=oe(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function w(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}w.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(qt||Ft),string:new ne}},w.prototype.delete=re,w.prototype.get=se,w.prototype.has=ae,w.prototype.set=ce;var le=w;function he(t,e){var n=this.__data__;if(n instanceof Ft){var i=n.__data__;if(!qt||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new le(i)}return n.set(t,e),this.size=n.size,this}function ue(t){t=this.__data__=new Ft(t);this.size=t.size}ue.prototype.clear=Rt,ue.prototype.delete=Pt,ue.prototype.get=Ht,ue.prototype.has=zt,ue.prototype.set=he;var de=ue;function pe(t){return this.__data__.has(t)}function fe(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new le;++e<n;)this.add(t[e])}fe.prototype.add=fe.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},fe.prototype.has=pe;var me=fe;var ge=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1};var ve=function(t,e){return t.has(e)};var _e=function(t,e,n,i,o,r){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&a<c))return!1;if((c=r.get(t))&&r.get(e))return c==e;var l=-1,h=!0,u=2&n?new me:void 0;for(r.set(t,e),r.set(e,t);++l<a;){var d,p=t[l],f=e[l];if(void 0!==(d=i?s?i(f,p,l,e,t,r):i(p,f,l,t,e,r):d)){if(d)continue;h=!1;break}if(u){if(!ge(e,function(t,e){if(!ve(u,e)&&(p===t||o(p,t,n,i,r)))return u.push(e)})){h=!1;break}}else if(p!==f&&!o(p,f,n,i,r)){h=!1;break}}return r.delete(t),r.delete(e),h},ye=i.Uint8Array;function be(t){var n=-1,i=Array(t.size);return t.forEach(function(t,e){i[++n]=[e,t]}),i}function we(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var c=t?t.prototype:void 0,Ce=c?c.valueOf:void 0;var ke=function(t,e,n,i,o,r,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return t.byteLength==e.byteLength&&r(new ye(t),new ye(e))?!0:!1;case"[object Boolean]":case"[object Date]":case"[object Number]":return Mt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=be;case"[object Set]":a=a||we;if(t.size!=e.size&&!(1&i))return!1;var c=s.get(t);if(c)return c==e;i|=2,s.set(t,e);c=_e(a(t),a(e),i,o,r,s);return s.delete(t),c;case"[object Symbol]":if(Ce)return Ce.call(t)==Ce.call(e)}return!1};var Ie=function(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t};var Se=function(t,e,n){return e=e(t),u(t)?e:Ie(e,n(t))};var Ae=Object.prototype.propertyIsEnumerable,Oe=Object.getOwnPropertySymbols,Ee=Oe?function(e){return null==e?[]:(e=Object(e),st(Oe(e),function(t){return Ae.call(e,t)}))}:function(){return[]};var Me=function(t){return Se(t,m,Ee)},xe=Object.prototype.hasOwnProperty;var Le=function(t,e,n,i,o,r){var s=1&n,a=Me(t),c=a.length;if(c!=Me(e).length&&!s)return!1;for(var l=c;l--;){var h=a[l];if(!(s?h in e:xe.call(e,h)))return!1}var u=r.get(t);if(u&&r.get(e))return u==e;for(var d,p=!0,f=(r.set(t,e),r.set(e,t),s);++l<c;){var m,g=t[h=a[l]],v=e[h];if(!(void 0===(m=i?s?i(v,g,h,e,t,r):i(g,v,h,t,e,r):m)?g===v||o(g,v,n,i,r):m)){p=!1;break}f=f||"constructor"==h}return p&&!f&&(u=t.constructor)!=(d=e.constructor)&&"constructor"in t&&"constructor"in e&&!("function"==typeof u&&u instanceof u&&"function"==typeof d&&d instanceof d)&&(p=!1),r.delete(t),r.delete(e),p},o=y(i,"DataView"),a=y(i,"Promise"),h=y(i,"Set"),d=y(i,"WeakMap"),Te="[object Map]",je="[object Promise]",Ne="[object Set]",Be="[object WeakMap]",Fe="[object DataView]",Re=v(o),Pe=v(qt),He=v(a),ze=v(h),De=v(d),r=n,Ve=r=o&&r(new o(new ArrayBuffer(1)))!=Fe||qt&&r(new qt)!=Te||a&&r(a.resolve())!=je||h&&r(new h)!=Ne||d&&r(new d)!=Be?function(t){var e=n(t),t="[object Object]"==e?t.constructor:void 0,t=t?v(t):"";if(t)switch(t){case Re:return Fe;case Pe:return Te;case He:return je;case ze:return Ne;case De:return Be}return e}:r,Ue="[object Arguments]",Ge="[object Array]",We="[object Object]",Ze=Object.prototype.hasOwnProperty;var Ke=function(t,e,n,i,o,r){var s=u(t),a=u(e),c=s?Ge:Ve(t),a=a?Ge:Ve(e),l=(c=c==Ue?We:c)==We,h=(a=a==Ue?We:a)==We;if((a=c==a)&&pt(t)){if(!pt(e))return!1;l=!(s=!0)}if(a&&!l)return r=r||new de,s||_t(t)?_e(t,e,n,i,o,r):ke(t,e,c,n,i,o,r);if(!(1&n)){s=l&&Ze.call(t,"__wrapped__"),c=h&&Ze.call(e,"__wrapped__");if(s||c)return o(s?t.value():t,c?e.value():e,n,i,r=r||new de)}return a&&(r=r||new de,Le(t,e,n,i,o,r))};var qe=function t(e,n,i,o,r){return e===n||(null==e||null==n||!s(e)&&!s(n)?e!=e&&n!=n:Ke(e,n,i,o,t,r))};var Ye=function(t,e,n,i){var o=n.length,r=o,s=!i;if(null==t)return!r;for(t=Object(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<r;){var c=(a=n[o])[0],l=t[c],h=a[1];if(s&&a[2]){if(void 0===l&&!(c in t))return!1}else{var u,d=new de;if(!(void 0===(u=i?i(l,h,c,t,e,d):u)?qe(h,l,3,i,d):u))return!1}}return!0};var Xe=function(t){return t==t&&!_(t)};var Je=function(t){for(var e=m(t),n=e.length;n--;){var i=e[n],o=t[i];e[n]=[i,o,Xe(o)]}return e};var $e=function(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in Object(t))}};var Qe=function(e){var n=Je(e);return 1==n.length&&n[0][2]?$e(n[0][0],n[0][1]):function(t){return t===e||Ye(t,e,n)}},tn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,en=/^\w*$/;var nn=function(t,e){var n;return!u(t)&&(!("number"!=(n=typeof t)&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Z(t))||en.test(t)||!tn.test(t)||null!=e&&t in Object(e))};function on(i,o){if("function"!=typeof i||null!=o&&"function"!=typeof o)throw new TypeError("Expected a function");function r(){var t=arguments,e=o?o.apply(this,t):t[0],n=r.cache;return n.has(e)?n.get(e):(t=i.apply(this,t),r.cache=n.set(e,t)||n,t)}return r.cache=new(on.Cache||le),r}on.Cache=le;var rn=on;var sn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,an=/\\(\\)?/g,cn=function(t){var e=(t=rn(t,function(t){return 500===e.size&&e.clear(),t})).cache;return t}(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(sn,function(t,e,n,i){o.push(n?i.replace(an,"$1"):e||t)}),o});var ln=function(t,e){return u(t)?t:nn(t,e)?[t]:cn(Y(t))};var hn=function(t){var e;return"string"==typeof t||Z(t)?t:"0"==(e=t+"")&&1/t==-1/0?"-0":e};var un=function(t,e){for(var n=0,i=(e=ln(e,t)).length;null!=t&&n<i;)t=t[hn(e[n++])];return n&&n==i?t:void 0};var dn=function(t,e,n){return void 0===(t=null==t?void 0:un(t,e))?n:t};function pn(t,e){return null!=t&&e in Object(t)}var fn=function(t,e,n){for(var i=-1,o=(e=ln(e,t)).length,r=!1;++i<o;){var s=hn(e[i]);if(!(r=null!=t&&n(t,s)))break;t=t[s]}return r||++i!=o?r:!!(o=null==t?0:t.length)&&gt(o)&&mt(s,o)&&(u(t)||ut(t))};var mn=function(t,e){return null!=t&&fn(t,e,pn)};var gn=function(n,i){return nn(n)&&Xe(i)?$e(hn(n),i):function(t){var e=dn(t,n);return void 0===e&&e===i?mn(t,n):qe(i,e,3)}};function vn(t){return t}var _n=function(e){return function(t){return null==t?void 0:t[e]}};var yn=function(e){return function(t){return un(t,e)}};var bn=function(t){return nn(t)?_n(hn(t)):yn(t)};var wn=function(t){return"function"==typeof t?t:null==t?vn:"object"==typeof t?u(t)?gn(t[0],t[1]):Qe(t):bn(t)};var Cn=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}};function kn(){return C.promo}var In=function(t,e){return(u(t)?st:Et)(t,Cn(wn(e)))},Sn=F(function(t,e){var n=E,i=e&&!e.nodeType&&e,e=t&&!t.nodeType&&t,o="object"==typeof E&&E;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var r,s,g=2147483647,v=36,_=26,a=38,c=700,l=/^xn--/,h=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=v-1,y=Math.floor,b=String.fromCharCode;function w(t){throw new RangeError(d[t])}function f(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function m(t,e){var n=t.split("@"),i="",n=(1<n.length&&(i=n[0]+"@",t=n[1]),(t=t.replace(u,".")).split("."));return i+f(n,e).join(".")}function C(t){for(var e,n,i=[],o=0,r=t.length;o<r;)55296<=(e=t.charCodeAt(o++))&&e<=56319&&o<r?56320==(64512&(n=t.charCodeAt(o++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),o--):i.push(e);return i}function k(t){return f(t,function(t){var e="";return 65535<t&&(e+=b((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=b(t)}).join("")}function I(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function S(t,e,n){var i=0;for(t=n?y(t/c):t>>1,t+=y(t/e);p*_>>1<t;i+=v)t=y(t/p);return y(i+(p+1)*t/(t+a))}function A(t){var e,n,i,o,r,s,a,c=[],l=t.length,h=0,u=128,d=72,p=t.lastIndexOf("-");for(p<0&&(p=0),n=0;n<p;++n)128<=t.charCodeAt(n)&&w("not-basic"),c.push(t.charCodeAt(n));for(i=0<p?p+1:0;i<l;){for(o=h,r=1,s=v;l<=i&&w("invalid-input"),a=t.charCodeAt(i++),(v<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:v)||a>y((g-h)/r))&&w("overflow"),h+=a*r,!(a<(a=s<=d?1:d+_<=s?_:s-d));s+=v)r>y(g/(a=v-a))&&w("overflow"),r*=a;d=S(h-o,e=c.length+1,0==o),y(h/e)>g-u&&w("overflow"),u+=y(h/e),h%=e,c.splice(h++,0,u)}return k(c)}function O(t){for(var e,n,i,o,r,s,a,c,l,h,u=[],d=(t=C(t)).length,p=128,f=72,m=e=0;m<d;++m)(a=t[m])<128&&u.push(b(a));for(n=i=u.length,i&&u.push("-");n<d;){for(o=g,m=0;m<d;++m)p<=(a=t[m])&&a<o&&(o=a);for(o-p>y((g-e)/(c=n+1))&&w("overflow"),e+=(o-p)*c,p=o,m=0;m<d;++m)if((a=t[m])<p&&++e>g&&w("overflow"),a==p){for(r=e,s=v;!(r<(l=s<=f?1:f+_<=s?_:s-f));s+=v)u.push(b(I(l+(h=r-l)%(l=v-l),0))),r=y(h/l);u.push(b(I(r,0))),f=S(e,c,n==i),e=0,++n}++e,++p}return u.join("")}if(r={version:"1.4.1",ucs2:{decode:C,encode:k},decode:A,encode:O,toASCII:function(t){return m(t,function(t){return h.test(t)?"xn--"+O(t):t})},toUnicode:function(t){return m(t,function(t){return l.test(t)?A(t.slice(4).toLowerCase()):t})}},i&&e)if(t.exports==i)e.exports=r;else for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);else n.punycode=r}),C={gso:"",forms:"",button:"",promo:""};function An(t){return On(window[t])?null:window[t]}function k(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];xn[t]&&xn[t].forEach(function(t){return t.apply({},e)})}var On=function(t){return void 0===t},En=["width=device-width","initial-scale=1.0","maximum-scale=1.0"],Mn="amocrm_applebm",xn={};var Ln=!1,Tn=[],jn=["runChatShutdown","runChatShow","runChatHide","runDestroy","sendKeyActionHook","setupContactForHuman"],Nn=function(t,e){for(var n=[],i=arguments.length-2;0<i--;)n[i]=arguments[i+2];var o=t("livechat"),r=t("keyactions"),s=t("button");if(!Ln&&-1<jn.indexOf(e))Tn.push(arguments);else switch(e){case"onChatShow":case"onChatRenderDone":case"onChatHide":case"onChatMessage":case"onChatReady":case"onChatShutdown":case"onButtonClick":case"onConversationsChange":!function(t,e){xn[t]||(xn[t]=[]),xn[t].push(e)}.apply(null,[e].concat(n));break;case"runChatShutdown":o&&o.shutdown();break;case"runStartMessagingFromShopify":o&&o.startMessagingFromShopify(n[0]);break;case"runChatShow":o&&o.show();break;case"runChatHide":o&&o.hide();break;case"runDestroy":s&&s.destroy();break;case"sendKeyActionHook":r&&r.reachHook(n[0]);break;case"setupContactForHuman":s&&s.setupContactForHuman(n[0])}};function Bn(t){var e,n=void 0!==window.amoSocialButton?"amoSocialButton":"crmPlugin";window[n]=(e=t,(t=void 0===(t=(window[n]||{}).q)?[]:t).forEach(function(t){Nn.apply(null,[e].concat(Array.prototype.slice.apply(t)))}),t.slice(0,0),Nn.bind(null,e))}e=function(r){return function(t,e,n){var i,o=Object(t),e=(f(t)||(i=wn(e),t=m(t),e=function(t){return i(o[t],t,o)}),r(t,e,n));return-1<e?o[i?t[e]:e]:void 0}};var Fn=function(t,e,n,i){for(var o=t.length,r=n+(i?1:-1);i?r--:++r<o;)if(e(t[r],r,t))return r;return-1},Rn=/^\s+|\s+$/g,Pn=/^[-+]0x[0-9a-f]+$/i,Hn=/^0b[01]+$/i,zn=/^0o[0-7]+$/i,Dn=parseInt;var Vn=function(t){if("number"==typeof t)return t;if(Z(t))return NaN;if(_(t)&&(e="function"==typeof t.valueOf?t.valueOf():t,t=_(e)?e+"":e),"string"!=typeof t)return 0===t?t:+t;t=t.replace(Rn,"");var e=Hn.test(t);return e||zn.test(t)?Dn(t.slice(2),e?2:8):Pn.test(t)?NaN:+t};var Un=function(t){return t?(t=Vn(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var Gn=function(t){var e=(t=Un(t))%1;return t==t?e?t-e:t:0},Wn=Math.max;var Zn=e(function(t,e,n){var i=null==t?0:t.length;return i?((n=null==n?0:Gn(n))<0&&(n=Wn(i+n,0)),Fn(t,wn(e),n)):-1}),Kn=0;function qn(t){return window.addEventListener?!Jn||(console.error("Cannot "+t+" event. EventController is stopped."),!1):(console.error("addEventListener is not available."),!1)}function Yn(t){var e=t.only_static,t=t.onFullyLoaded;this.files_loaded=[],this.load_start=Date.now(),this.load_end=null,this.handleFileLoaded=this.handleFileLoaded.bind(this),this.checkIsFullyLoaded=this.checkIsFullyLoaded.bind(this),this.only_static=e,this.onFullyLoaded=t,S.add({target:window,eventName:"message",handler:this.handleFileLoaded})}var Xn=function(t){var e=++Kn;return Y(t)+e},Jn=!1,I={},S={add:function(t){var e=t.target,n=t.eventName,t=t.handler;if(!qn("add"))return!1;if(Boolean(Zn(I,{target:e,eventName:n,handler:t})))return!1;e.addEventListener(n,t);var i=Xn("event_");return I[i]={target:e,eventName:n,handler:t},i},remove:function(t){if(!qn("remove"))return!1;var e,n,i;if("string"==typeof t)return(i=I[t])?(e=i.target,n=i.eventName,i=i.handler,e.removeEventListener(n,i),delete I[t],!0):(console.error("There is no event with that token:",t),!1);var o,r=!1,s=t.target,a=t.eventName,c=t.handler;for(o in I){var l=I[o];if(s===l.target&&a===l.eventName&&c===l.handler){s.removeEventListener(a,c),delete I[o],r=!0;break}}return r},removeAll:function(){var t,e=!1;for(t in I)var n=this.remove(t),e=e||n;return e},stop:function(){Jn=!0}},$n=["livechat","inner"],Qn=(Yn.prototype.handleFileLoaded=function(t){t=t.data;try{t=JSON.parse(t)}catch(t){return}switch(t.method){case"livechat_static:loaded":this.only_static&&this.onFileLoaded("livechat");break;case"livechat:rendered":this.onFileLoaded("livechat");break;case"inner:rendered":this.onFileLoaded("inner")}},Yn.prototype.onFileLoaded=function(t){this.load_end=Math.max(this.load_end,Date.now()),this.files_loaded.push(t),this.checkIsFullyLoaded()},Yn.prototype.checkIsFullyLoaded=function(){var e=this;$n.every(function(t){return e.files_loaded.includes(t)})&&(this.onFullyLoaded(this.load_end-this.load_start),S.remove({target:window,eventName:"message",handler:this.handleFileLoaded}))},Object.prototype.hasOwnProperty);var ti=function(t){if(null!=t){if(f(t)&&(u(t)||"string"==typeof t||"function"==typeof t.splice||pt(t)||_t(t)||ut(t)))return!t.length;var e,n=Ve(t);if("[object Map]"==n||"[object Set]"==n)return!t.size;if(Ct(t))return!St(t).length;for(e in t)if(Qn.call(t,e))return!1}return!0};function ei(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}var ni=function(t){return"function"==typeof t?t:vn};function ii(t,e){var n=Number.parseFloat(t.style.right);n&&t.style.setProperty("right",n+e+"px")}function oi(t){ci=window.innerWidth-document.documentElement.clientWidth,li=document.body.style.getPropertyValue("overflow"),document.body.style.setProperty("overflow","hidden"),ci&&(document.documentElement.style.setProperty("margin-right",ci+"px"),ai(t,function(t){ii(t,ci)}))}function ri(t){li?(document.body.style.setProperty("overflow",li),li=null):document.body.style.removeProperty("overflow"),ci&&(document.documentElement.style.removeProperty("margin-right"),ai(t,function(t){ii(t,-ci)}))}function si(t){var e=t.button_holder,t=t.amoforms_url;this.button_holder=e,this.amoforms_url=t,this.is_loading=!1,this.waiting_to_show={},this.handleWindowMessageBound=this.handleWindowMessage.bind(this)}var ai=function(t,e){return(u(t)?ei:Ot)(t,ni(e))},ci=0,li=null;si.prototype.show=function(t){var e=t.id,t=t.hash;this.is_loading?this.waiting={id:e,hash:t}:(void 0!==window.amo_forms_params&&(this.buffer_amo_forms_params=Object.assign({},window.amo_forms_params)),this.hide(),window.amo_forms_params={id:e,hash:t,locale:"ru"},S.add({target:window,eventName:"message",handler:this.handleWindowMessageBound}),this.modal=document.createElement("div"),this.script=document.createElement("script"),e=document.createElement("div"),t=document.createElement("span"),this.modal.style="\n      position: fixed;\n      z-index: 2147483647;\n      background: rgba(0,0,0,.4);\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom:0;\n      opacity: 0;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n      -ms-flex-align: center;\n      align-items: center;\n      -webkit-box-pack: center;\n      -ms-flex-pack: center;\n      justify-content: center;\n      overflow: auto;\n    ",S.add({target:this.modal,eventName:"click",handler:this.hide.bind(this)}),e.style="\n      position: relative;\n      margin: auto;\n      width: calc(100% - 90px);\n      padding-top: 40px;\n    ",S.add({target:e,eventName:"click",handler:function(t){return t.stopPropagation()}}),t.style="\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n      -ms-flex-align: center;\n      align-items: center;\n      -webkit-box-pack: center;\n      -ms-flex-pack: center;\n      justify-content: center;\n      position: absolute;\n      top: 0;\n      left: 100%;\n      height: 60px;\n      width: 43px;\n      background: none;\n      border: none;\n      padding: 0;\n      cursor: pointer;\n    ",t.innerHTML='\n      <svg width="15" height="16" viewBox="0 0 15 16" xmlns="http://www.w3.org/2000/svg">\n        <path fill="#fff" fill-rule="evenodd" clip-rule="evenodd" d="M7.49998 9.63673L1.97906 15.1577C1.52604 15.6107 0.791253 15.6127 0.339281 15.1607C-0.115843 14.7056 -0.111341 13.9746 0.342318 13.5209L5.86324 8L0.342318 2.47906C-0.110696 2.02604 -0.112692 1.29124 0.339281 0.839272C0.794404 0.384148 1.5254 0.388668 1.97906 0.842327L7.49998 6.36326L13.0209 0.842327C13.474 0.389313 14.2087 0.387299 14.6607 0.839272C15.1158 1.2944 15.1113 2.0254 14.6577 2.47906L9.13672 8L14.6577 13.5209C15.1107 13.974 15.1127 14.7088 14.6607 15.1607C14.2056 15.6159 13.4746 15.6113 13.0209 15.1577L7.49998 9.63673Z" />\n      </svg>\n    ',S.add({target:t,eventName:"click",handler:this.hide.bind(this)}),this.script.id="amoforms_script",this.script.src=this.amoforms_url,e.appendChild(this.script),e.appendChild(t),this.modal.appendChild(e),document.body.appendChild(this.modal),oi([this.button_holder]),this.is_loading=!0)},si.prototype.hide=function(){this.modal&&(this.modal&&this.modal.parentNode.removeChild(this.modal),this.script&&this.script.parentNode.removeChild(this.script),window.removeEventListener("message",this.handleWindowMessageBound),void 0!==this.buffer_amo_forms_params?(window.amo_forms_params=Object.assign({},this.buffer_amo_forms_params),delete this.buffer_amo_forms_params):delete window.amo_forms_params,ri([this.button_holder]),this.modal=null)},si.prototype.handleWindowMessage=function(t){var e=this,n=null;try{n=JSON.parse(t.data)}catch(t){n=null}if(n&&_(n))switch(n.func){case"resizeForm":var i=document.getElementById(n.iframe_id);setTimeout(function(){e.is_loading=!1,ti(e.waiting)?(i.style.position="relative",n.max_width&&(i.parentNode.style.maxWidth=n.max_width+"px"),e.modal.style.opacity=1):(e.show(e.waiting),e.waiting={})});break;case"amoformsSuccessSubmit":setTimeout(function(){return e.hide()},1e3)}};var hi=function(e,t){return P(t,function(t){return e[t]})};var ui=function(t){return null==t?[]:hi(t,m(t))},di=function(){try{var t=y(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var pi=function(t,e,n){"__proto__"==e&&di?di(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},fi=Object.prototype.hasOwnProperty;var mi=function(t,e,n){var i=t[e];fi.call(t,e)&&Mt(i,n)&&(void 0!==n||e in t)||pi(t,e,n)};var gi=function(t,e,n,i){if(_(t))for(var o=-1,r=(e=ln(e,t)).length,s=r-1,a=t;null!=a&&++o<r;){var c,l=hn(e[o]),h=n;o!=s&&(c=a[l],void 0===(h=i?i(c,l,a):void 0))&&(h=_(c)?c:mt(e[o+1])?[]:{}),mi(a,l,h),a=a[l]}return t};var vi=function(t,e,n){for(var i=-1,o=e.length,r={};++i<o;){var s=e[i],a=un(t,s);n(a,s)&&gi(r,ln(s,t),a)}return r};var _i=function(n,t){return vi(n,t,function(t,e){return mn(n,e)})},yi=t?t.isConcatSpreadable:void 0;function bi(t){return u(t)||ut(t)||!!(yi&&t&&t[yi])}var wi=function t(e,n,i,o,r){var s=-1,a=e.length;for(i=i||bi,r=r||[];++s<a;){var c=e[s];0<n&&i(c)?1<n?t(c,n-1,i,o,r):Ie(r,c):o||(r[r.length]=c)}return r};function Ci(t){return(null==t?0:t.length)?wi(t,1):[]}var ki=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Ii=Math.max;var Si=function(r,s,a){return s=Ii(void 0===s?r.length-1:s,0),function(){for(var t=arguments,e=-1,n=Ii(t.length-s,0),i=Array(n);++e<n;)i[e]=t[s+e];for(var e=-1,o=Array(s+1);++e<s;)o[e]=t[e];return o[s]=a(i),ki(r,this,o)}};var Ai=function(t){return function(){return t}},Oi=Date.now;var Ei=function(n){var i=0,o=0;return function(){var t=Oi(),e=16-(t-o);if(o=t,0<e){if(800<=++i)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}(di?function(t,e){return di(t,"toString",{configurable:!0,enumerable:!1,value:Ai(e),writable:!0})}:vn);function Mi(t){t=t||21;for(var e="",n=Ti.getRandomValues(new Uint8Array(t));t--;)e+=ji[63&n[t]];return e}var xi=function(t){return Ei(Si(t,void 0,Ci),t+"")}(function(t,e){return null==t?{}:_i(t,e)}),Li=F(function(t,e){var n;n=function(){function a(){for(var t=arguments,e=0,n={};e<arguments.length;e++){var i,o=t[e];for(i in o)n[i]=o[i]}return n}function l(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(c){function s(){}function n(t,e,n){if("undefined"!=typeof document){"number"==typeof(n=a({path:"/"},s.defaults,n)).expires&&(n.expires=new Date(+new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var i=JSON.stringify(e);/^[\{\[]/.test(i)&&(e=i)}catch(t){}e=c.write?c.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o,r="";for(o in n)n[o]&&(r+="; "+o,!0!==n[o])&&(r+="="+n[o].split(";")[0]);return document.cookie=t+"="+e+r}}function e(t,e){if("undefined"!=typeof document){for(var n={},i=document.cookie?document.cookie.split("; "):[],o=0;o<i.length;o++){var r=i[o].split("="),s=r.slice(1).join("=");e||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var a=l(r[0]),s=(c.read||c)(s,a)||l(s);if(e)try{s=JSON.parse(s)}catch(t){}if(n[a]=s,t===a)break}catch(t){}}return t?n[t]:n}}return s.set=n,s.get=function(t){return e(t,!1)},s.getJSON=function(t){return e(t,!0)},s.remove=function(t,e){n(t,"",a(e,{expires:-1}))},s.defaults={},s.withConverter=t,s}(function(){})},t.exports=n()}),Ti=self.crypto||self.msCrypto,ji="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-",Ni=function(){return i.Date.now()},Bi=Math.max,Fi=Math.min;function A(t,e){var n=this,i=parseFloat(sessionStorage.getItem("amo_social_button_tracking_time"))||0;if(this.scrollParams={scrolled_unit:t.scrolled_unit,scrolled_value:parseInt(t.scrolled_value)},t&&"Y"===t.enabled&&t.message){var o=parseInt(t.frequency);this.onShow=e.bind(this),this.displayGreeting=this.displayGreeting.bind(this),this.displayGreetingOnScrollListener=this.displayGreetingOnScrollListener.bind(this);var r=i<(r=1e3*t.timeout)?r-i:r;if(2!==o||"true"!==sessionStorage.getItem(Pi))if(3===o)this.checkFrequencyDay();else switch(this.scrollParams.scrolled_value&&this.afterScrollGreeting(),!0){case this.pageCompare(t):case this.hitsCompare(t):this.displayGreeting();break;default:this.timeout=setTimeout(function(){return n.displayGreeting()},r)}}}var Ri=function(i,n,t){var o,r,s,a,c,l,h=0,u=!1,d=!1,e=!0;if("function"!=typeof i)throw new TypeError("Expected a function");function p(t){var e=o,n=r;return o=r=void 0,h=t,a=i.apply(n,e)}function f(t){var e=t-l;return void 0===l||n<=e||e<0||d&&s<=t-h}function m(){var t,e=Ni();if(f(e))return g(e);c=setTimeout(m,(t=n-((e=e)-l),d?Fi(t,s-(e-h)):t))}function g(t){return c=void 0,e&&o?p(t):(o=r=void 0,a)}function v(){var t=Ni(),e=f(t);if(o=arguments,r=this,l=t,e){if(void 0===c)return h=t=l,c=setTimeout(m,n),u?p(t):a;if(d)return clearTimeout(c),c=setTimeout(m,n),p(l)}return void 0===c&&(c=setTimeout(m,n)),a}return n=Vn(n)||0,_(t)&&(u=!!t.leading,d="maxWait"in t,s=d?Bi(Vn(t.maxWait)||0,n):s,e="trailing"in t?!!t.trailing:e),v.cancel=function(){void 0!==c&&clearTimeout(c),o=l=r=c=void(h=0)},v.flush=function(){return void 0===c?a:g(Ni())},v},Pi="amo_social_button_banner_shown_at";A.prototype.destroy=function(){this.scrollParams.scrolled_value&&S.remove({target:window,eventName:"scroll",handler:this.debouncedDisplayGreetingOnScrollListener}),clearTimeout(this.timeout)},A.prototype.displayGreetingOnScrollListener=function(t){var e=this.scrollParams,n=e.scrolled_unit,e=e.scrolled_value,i=window.innerHeight*(window.innerHeight/document.documentElement.scrollHeight),n="%"===n?document.documentElement.scrollHeight*e/100:e;window.pageYOffset+i>=i+n&&(this.scrollParams.is_scroll="N",this.displayGreeting())},A.prototype.afterScrollGreeting=function(){this.debouncedDisplayGreetingOnScrollListener=Ri(this.displayGreetingOnScrollListener,100),S.add({target:window,eventName:"scroll",handler:this.debouncedDisplayGreetingOnScrollListener}),this.displayGreetingOnScrollListener()},A.prototype.checkFrequencyDay=function(){var t=this,e=(parseInt(localStorage.getItem(Pi))||0)+864e5;Date.now()<e?(e=e-Date.now())/1e3<900&&(this.timeout=setTimeout(function(){return t.checkFrequencyDay()},e)):this.displayGreeting()},A.prototype.pageCompare=function(t){var e=window.location.pathname,t=t.page||{value:"",mask:1};return this.compareWithMask(e,t.value,t.mask)},A.prototype.compareWithMask=function(t,e,n){var i=!1;switch(t=t.toString(),e=e.toString(),parseInt(n)){case 1:i=t===e;break;case 2:i=t!==e;break;case 3:i=t.startsWith(e);break;case 4:i=t.endsWith(e);break;case 5:i=t.includes(e);break;case 6:i=!t.includes(e)}return i},A.prototype.hitsCompare=function(t){var e=parseInt(sessionStorage.getItem("amo_social_button_tracking_hits"))||0,t=parseInt(t.hits)||0;return 0!==e&&0!==t&&t<=e},A.prototype.displayGreeting=function(){this.onShow(),localStorage.setItem(Pi,Date.now().toString()),sessionStorage.setItem(Pi,"true"),this.destroy()};var Hi=function(t,e,n,i){for(var o=!n,r=(n=n||{},-1),s=e.length;++r<s;){var a=e[r],c=i?i(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),(o?pi:mi)(n,a,c)}return n};var zi=function(t,e){return Ei(Si(t,e,vn),t+"")};var Di=function(t,e,n){var i;return!!_(n)&&!!("number"==(i=typeof e)?f(n)&&mt(e,n.length):"string"==i&&e in n)&&Mt(n[e],t)};var l=function(a){return zi(function(t,e){var n=-1,i=e.length,o=1<i?e[i-1]:void 0,r=2<i?e[2]:void 0,o=3<a.length&&"function"==typeof o?(i--,o):void 0;for(r&&Di(e[0],e[1],r)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var s=e[n];s&&a(t,s,n,o)}return t})},Vi=Object.prototype.hasOwnProperty,Ui=l(function(t,e){if(Ct(e)||f(e))Hi(e,m(e),t);else for(var n in e)Vi.call(e,n)&&mi(t,n,e[n])});Gi="AMO_LIVECHAT_IFRAME";var Gi,Wi,Zi={subscribeToBus:function(n){function t(t){try{var e=JSON.parse(t.data);e.origin===An(Gi)&&n(e)}catch(t){throw new Error(t)}}return window.addEventListener("message",t),function(){return window.removeEventListener("message",t)}},sendBusMessage:function(t){window.parent.postMessage(JSON.stringify(_(t)?Ui({},t,{origin:An(Gi)}):t),"*")}}.sendBusMessage,Ki={Conversation:"Беседа",Conversations:"Список бесед",Today:"Сегодня",Yesterday:"Вчера","Show all":"Показать все","Create new conversation":"Создать новую беседу",You:"Вы"},qi={Conversation:"Conversation",Conversations:"Conversations",Today:"Today",Yesterday:"Yesterday","Show all":"Show all","Create new conversation":"Create new conversation",You:"You"},Yi={Conversation:"Conversación",Conversations:"Conversaciones",Today:"Hoy",Yesterday:"Ayer","Show all":"Mostrar todo","Create new conversation":"Crear nueva conversación",You:"Tú:"},Xi={Conversation:"Conversa",Conversations:"Conversas",Today:"Hoje",Yesterday:"Ontem","Show all":"Mostrar tudo","Create new conversation":"Criar nova conversa",You:"Você"};function O(t){var e;switch(Wi){case"ru":e=Ki;break;case"es":e=Yi;break;case"pt":e=Xi;break;default:e=qi}return e&&e[t]||t}function M(t){var e=t.context,n=t.conversations,i=t.selectorWrapper,o=t.onOpenAllClick,r=(void 0===o&&(o=function(){}),t.onSelectorToggle),s=(void 0===r&&(r=function(){}),t.onConversationClick);void 0===s&&(s=function(){}),void 0===(t=t.onAddConversationClick)&&(t=function(){}),this.view=i,this.context=e,this.isSelectorOpened=!0,this.isBlockedCloseSelector=!0,this.isOpenedAll=!1,this.firstRender=!0,this.parentHeight=0,this.conversations=n||[],this.selectedConversation="",this.onOpenAllClick=o,this.onSelectorToggle=r,this.onConversationClick=s,this.onAddConversationClick=t,this.triggerOnConversationsChange(),this.initMediaMatcher()}function x(t){this.props=t=void 0===t?{}:t;var e=(t=this.props).config,t=t.brandName,t=(this.brandName=t,0<=["widget","frame"].indexOf(e.mode)?e.mode:"widget");this.chatContainer=null,"frame"===e.mode&&e.container&&document.querySelector(e.container)&&(t="frame",this.chatContainer=document.querySelector(e.container)),this.mode=t,this.userData=e.params||{},this.userProfile=xi(e.profile,["name","email","phone","avatar"]),this.locale=e.locale||null,this.theme=e.theme||null,e.user_id&&(this.custom_user_id=e.user_id),this.isEnabled=this.props.enabled,this.isActive=!1,this.isInited=!1,this.isMetaViewportChanged=!1,this.isInline=this.props.isInline,this.isGreetingAwaited=!1,this.areKeyactionsActive=this.props.has_keyactions,this.hasGreetingReaction=this.props.has_greeting_reaction,this.name="amo-livechat-iframe-"+Mi(8),this.activeClassName=this.name+"-active",this.socialServiceSize=this.props.serviceSize||50,this.socialServiceSizeWithMargin=this.socialServiceSize+4,this.servicesCount=this.props.servicesCount,this.indexLivechatInChats=this.props.indexLivechatInChats,this.handleWindowResize=this.handleWindowResize.bind(this),this.handleBusMessage=this.handleBusMessage.bind(this),this.currentMetaViewport=document.querySelector('meta[name="viewport"]'),this.currentMetaViewportContent=this.currentMetaViewport?this.currentMetaViewport.content:"",this.currentPageWidth=document.documentElement.clientWidth,S.add({target:window,eventName:"message",handler:this.handleBusMessage}),this.iframe_wrapper=this.setupIframe()}function Ji(){}function L(t){var e=t.keyactions,n=(void 0===e&&(e=[]),t.sendCRMReactions),i=(void 0===n&&(n=Ji),t.showAnimation),o=(void 0===i&&(i=Ji),t.showForm);void 0===o&&(o=Ji),void 0===(t=t.showGreeting)&&(t=Ji),this.reached={},this.conditions={},this.reactions={},this.constraintTimeouts={},this.conditionTimeouts={},this.sendCRMReactions=n,this.showAnimation=i,this.showForm=o,this.showGreeting=t,this.parse(e),this.initChangePageUrl()}function T(t){this.props=t=void 0===t?{}:t,t=this.props.brandName,this.brandName=t}function $i(){return Array.prototype.slice.call(document.all).reduce(function(t,e){return Math.max(t,+window.getComputedStyle(e).zIndex||0)},0)}var c={isMobile:{configurable:!0},selectedConversationId:{configurable:!0},shouldOpenSelector:{configurable:!0},isOpenedAll:{configurable:!0}},Qi=(M.prototype.getSelectors=function(){return{selector:".conversation-selector",header:".conversation-selector__header",mobileHeader:".conversation-selector__header--mobile",closeMobile:".conversation-selector__header-close",conversationsWrapper:".conversation-selector__conversations",openAll:".conversation-selector__open-all",addConversation:".conversation-selector__add-button",headerIcon:".conversation-selector__header-icon",conversationItem:".conversation-selector__item"}},M.prototype.getConversationTemplate=function(t){var e=t.id,n=t.name,i=t.date,o=t.author,r=t.message;return'\n      <div class="conversation-selector__item '+(t.selected?"selected":"")+'" data-id="'+e+'">\n        <div class="conversation-selector__item-wrapper">\n          <div class="conversation-selector__item-header">\n          <div class="conversation-selector__name-wrapper">\n            <span>'+O("Conversation")+'</span>\n            <span class="conversation-selector__conversation-id">\n              '+n+'\n            </span>\n          </div>\n          <div class="conversation-selector__item-header-date">\n            '+i+'\n          </div>\n        </div>\n        <div class="conversation-selector__item-message">\n          '+o+": "+r+"\n        </div>\n        </div>\n      </div>\n    "},M.prototype.getSelectorTemplate=function(){return'\n      <div class="conversation-selector">\n        <div class="conversation-selector__inner">\n          <div class="conversation-selector__header">\n            <div class="conversation-selector__header-text">'+O("Conversations")+'</div>\n\n            <div class="conversation-selector__header-icon">\n              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="7" viewBox="0 0 12 7" fill="none">\n                <path d="M10.2929 0.292892C10.6834 -0.0976314 11.3166 -0.0976315 11.7071 0.292892C12.0976 0.683417 12.0976 1.31658 11.7071 1.70711L10.2929 0.292892ZM6 6L6.70711 6.70711C6.51957 6.89464 6.26522 7 6 7C5.73478 7 5.48043 6.89464 5.29289 6.70711L6 6ZM0.292893 1.70711C-0.0976316 1.31658 -0.0976317 0.683417 0.292893 0.292893C0.683417 -0.0976309 1.31658 -0.097631 1.70711 0.292893L0.292893 1.70711ZM11.7071 1.70711L6.70711 6.70711L5.29289 5.29289L10.2929 0.292892L11.7071 1.70711ZM5.29289 6.70711L0.292893 1.70711L1.70711 0.292893L6.70711 5.29289L5.29289 6.70711Z" fill="#313942"/>\n              </svg>\n            </div>\n\n            <div class="conversation-selector__header-close">\n              <svg width="15" height="16" viewBox="0 0 15 16" xmlns="http://www.w3.org/2000/svg">\n                <path fill-rule="evenodd" clip-rule="evenodd" d="M7.49998 9.63673L1.97906 15.1577C1.52604 15.6107 0.791253 15.6127 0.339281 15.1607C-0.115843 14.7056 -0.111341 13.9746 0.342318 13.5209L5.86324 8L0.342318 2.47906C-0.110696 2.02604 -0.112692 1.29124 0.339281 0.839272C0.794404 0.384148 1.5254 0.388668 1.97906 0.842327L7.49998 6.36326L13.0209 0.842327C13.474 0.389313 14.2087 0.387299 14.6607 0.839272C15.1158 1.2944 15.1113 2.0254 14.6577 2.47906L9.13672 8L14.6577 13.5209C15.1107 13.974 15.1127 14.7088 14.6607 15.1607C14.2056 15.6159 13.4746 15.6113 13.0209 15.1577L7.49998 9.63673Z" />\n              </svg>\n            </div>\n          </div>\n\n          <div class="conversation-selector__wrapper">\n            <div class="conversation-selector__conversations"></div>\n            <div class="conversation-selector__action-button conversation-selector__open-all">\n              '+O("Show all")+'\n            </div>\n            <div class="conversation-selector__action-button conversation-selector__add-button">\n              '+O("Create new conversation")+"\n            </div>\n          </div>\n        </div>\n      </div>\n    "},M.prototype.getFormattedDate=function(t){var t=new Date(t),e=new Date,n=new Date(Date.now()-864e5),i=t.getDate(),o=t.getMonth()+1,t=t.getFullYear();return i===e.getDate()&&o===e.getMonth()+1&&t===e.getFullYear()?O("Today"):i===n.getDate()&&o===n.getMonth()+1&&t===n.getFullYear()?O("Yesterday"):(i<10?"0"+i:i)+"."+(o<10?"0"+o:o)+"."+t},M.prototype.getNode=function(t){var e=this.view.querySelector(t);return e||(console.error(t+" node not found"),!1)},M.prototype.initMediaMatcher=function(){var e=this;this._mediaMatcher=matchMedia("(max-width: 450px)"),this._mediaMatcher.onchange=function(t){e.onMediaChange(t.matches)}},c.isMobile.get=function(){return this._mediaMatcher.matches},M.prototype.onMediaChange=function(){this.renderConversations()},M.prototype.calculateSelectorHeight=function(){var t,e,n;this.parentHeight&&(t=this.getNode(this.getSelectors().conversationsWrapper),e=this.visibleConversationsCount,n=this.isOpenedAll?1:2,this.visibleConversationsCount=Math.floor((this.parentHeight-44-42*n-16)/69),this.visibleConversationsCount=this.visibleConversationsCount<2?2:this.visibleConversationsCount,this.visibleConversationsCount>=this.conversations.length?(this.visibleConversationsCount=this.conversations.length,this.setVisibilityAllButton(!1)):this.setVisibilityAllButton(!this.isOpenedAll),this.isMobile?t.style.height="":t.style.height=69*this.visibleConversationsCount+"px",e!==this.visibleConversationsCount)&&this.renderConversations()},M.prototype.openSelector=function(t){this.toggleSelector(!0),t&&(this.isBlockedCloseSelector=t,this.getNode(this.getSelectors().headerIcon).classList.add("invisible"))},M.prototype.getHeight=function(){return this.getNode(this.getSelectors().selector).offsetHeight},M.prototype.renderConversations=function(){var t,n,i=this;this.conversations.length||this.selectedConversation?(this.view.style.display="block",t=this.getNode(this.getSelectors().conversationsWrapper),t||this.render(),n="",this.conversations.forEach(function(t,e){e>i.visibleConversationsCount-1&&!i.isOpenedAll||(e={id:t.id,name:t.name,selected:i.selectedConversationId===t.id},(t=t.last_message)?(e.date=i.getFormattedDate(t.created_at),e.author=t.author?t.author.name:O("You"),e.message=t.text):console.error("last message not defined"),n+=i.getConversationTemplate(e))}),t.innerHTML=n,this.setConversationsEvents(),this.calculateSelectorHeight()):(this.view.style.display="none",this.toggleSelector(!1))},c.selectedConversationId.get=function(){return this.selectedConversation?this.selectedConversation.id:null},M.prototype.render=function(){this._shouldOpenSelector=this.firstRender;var t=this.getSelectorTemplate();this.view.innerHTML=t;try{this.renderConversations()}catch(t){console.error("render conversations failure"),console.error(t)}this.conversations.length<2?(this.isSelectorOpened=!1,this.isBlockedCloseSelector=!1,this._shouldOpenSelector=!1,this.toggleSelector(!1)):this.getNode(this.getSelectors().headerIcon).classList.add("invisible"),this.toggleSelector(this._shouldOpenSelector),this.firstRender=!1,this.initDomEvents()},c.shouldOpenSelector.get=function(){return this._shouldOpenSelector},M.prototype.initDomEvents=function(){var e=this;S.add({target:this.getNode(this.getSelectors().selector),eventName:"click",handler:function(t){t.preventDefault()}}),S.add({target:this.getNode(this.getSelectors().header),eventName:"click",handler:function(t){e.isMobile?e.handleMobileHeaderClick(t):e.handleSelectorClick(t)}}),S.add({target:this.getNode(this.getSelectors().addConversation),eventName:"click",handler:function(t){e._shouldOpenSelector=!1,e.setSelectedConversation(null),e.handleAddConversationClick(t),e.onAddConversationClick(t)}}),S.add({target:this.getNode(this.getSelectors().openAll),eventName:"click",handler:function(t){e.handleOpenAllClick(t),e.onOpenAllClick(t)}})},M.prototype.setConversationsEvents=function(){var e=this;this.view.querySelectorAll(this.getSelectors().conversationItem).forEach(function(t){S.add({target:t,eventName:"click",handler:function(t){e._shouldOpenSelector=!1,e.handleItemClick(t),e.onConversationClick(t)}})})},M.prototype.setVisibilityAllButton=function(t){this.getNode(this.getSelectors().openAll).classList.toggle("invisible",!t)},M.prototype.setConversations=function(t){var e;this.selectedConversation&&(e=Zn(t,{id:this.selectedConversation.id}))&&(this.selectedConversation=e),this.conversations=t,this.renderConversations(),this.triggerOnConversationsChange()},M.prototype.setSelectedConversation=function(t){t?(this.context.sendBusMessage({method:"select_conversation",payload:t}),this.selectedConversation=Zn(this.conversations,{id:t})):this.selectedConversation=t,this.renderConversations()},M.prototype.setParentHeight=function(t){t&&(this.parentHeight=parseInt(t),this.calculateSelectorHeight())},M.prototype.busHeaderClick=function(){this.tryToToggleSelector()},M.prototype.handleSelectorClick=function(t){t.stopPropagation(),this.tryToToggleSelector()},M.prototype.tryToToggleSelector=function(){!this.view||this.firstRender||this.isBlockedCloseSelector||this.toggleSelector()},M.prototype.handleMobileHeaderClick=function(t){t.stopPropagation(),t.target.closest(this.getSelectors().closeMobile)?Zi("click_button"):this.tryToToggleSelector()},M.prototype.handleOpenAllClick=function(t){t.stopPropagation(),this.setVisibilityAllButton(!1),this.isOpenedAll=!0,this.renderConversations(),this.calculateSelectorHeight()},c.isOpenedAll.get=function(){return this._isOpenedAll||this.isMobile},c.isOpenedAll.set=function(t){return this._isOpenedAll=t},M.prototype.handleAddConversationClick=function(t){t.stopPropagation(),this.context.sendBusMessage({method:"add_conversation"}),this.toggleSelector(!1),this.isBlockedCloseSelector=!1,this.getNode(this.getSelectors().headerIcon).classList.toggle("invisible",this.isBlockedCloseSelector),this.conversations.length||this.triggerOnConversationsChange()},M.prototype.handleItemClick=function(t){t.stopPropagation();t=t.currentTarget.getAttribute("data-id");this.selectedConversationId!==t&&this.setSelectedConversation(t),this.toggleSelector(!1),this.isBlockedCloseSelector=!1,this.getNode(this.getSelectors().headerIcon).classList.toggle("invisible",this.isBlockedCloseSelector)},M.prototype.triggerOnConversationsChange=function(){function n(t){var e,n,i,o,r,s,a=t.name,c=t.is_closed;return(t=t.last_message)&&(e=t.created_at,n=t.is_out,i=t.text,s=t.media_url,o=t.type,r=t.author,o="picture"===o?"photo":o,s={media:s?{url:s,thumbnail:t[o]?t[o].thumbnail:void 0}:void 0,created_at:e,is_out:n,text:i,type:o,author:r=r?{name:r.name}:void 0}),{name:a,is_closed:c,last_message:s}}var i=this,o=!1,t=this.conversations.map(function(t){var e=t.id;return o=o||e===i.selectedConversationId,n(t)});this.selectedConversation&&!o&&t.push(Object.assign({},n(this.selectedConversation),{is_closed:!0})),k("onConversationsChange",t)},M.prototype.toggleSelector=function(t){void 0===t&&(t=!this.isSelectorOpened),this.isSelectorOpened=t;t="closed";this.isSelectorOpened&&(t=this.shouldOpenSelector?"opened-fully":"opened"),this.getNode(this.getSelectors().selector).classList.toggle("opened",this.isSelectorOpened),this.context.sendBusMessage({method:"selector_open_state",payload:t}),this.onSelectorToggle(t)},Object.defineProperties(M.prototype,c),"amo-livechat"),to="amo-livechat_bubble",eo="amo-livechat_chat",no="amo-livechat_opening",io="amo-livechat_hiding",oo="amo-livechat_hidden",ro="amo-livechat-id",so=(x.prototype.show=function(){var t=this;!this.isActive&&this.isEnabled&&this.isInited&&(this.isActive=!0,this.hideBubble(),this.updateMetaViewport(),this.getUUID()||this.setUUID(),setTimeout(function(){document.documentElement.classList.add(t.activeClassName),t.iframe_wrapper.classList.remove(no),t.iframe.focus()},200),document.documentElement.classList.add(this.name),this.iframe_wrapper.style.bottom="",this.iframe_wrapper.classList.remove(oo),this.iframe_wrapper.classList.add(no),this.iframe_wrapper.classList.add(eo),this.isInline&&"vertical"===this.props.orientation&&(this.iframe_wrapper.style[this.props.position.h]=this.socialServiceSizeWithMargin+25+"px",this.iframe_wrapper.style[this.props.position.v]="top"===this.props.position.v?"-19px":"-22px"),this.sendBusMessage({method:"livechat:onShow"},"socials"),this.sendBusMessage({method:"toggle",payload:{state:!0}},"livechat"),this.handleWindowResize(),k("onChatShow"))},x.prototype.startMessagingFromShopify=function(t){this.sendBusMessage({method:"start_messaging_from_shopify",payload:{userMessage:t}})},x.prototype.hide=function(){var t=this;this.isActive&&this.isEnabled&&this.isInited&&(this.isActive=!1,document.documentElement.classList.remove(this.activeClassName),this.iframe_wrapper.classList.add(io),setTimeout(function(){document.documentElement.classList.remove(t.name),t.iframe_wrapper.classList.remove(io),t.iframe_wrapper.classList.remove(eo),t.iframe_wrapper.classList.contains(to)||(t.iframe_wrapper.classList.add(oo),t.iframe_wrapper.style.height="")},200),this.sendBusMessage({method:"toggle",payload:{state:!1}}),this.removeMetaViewport(),k("onChatHide"))},x.prototype.updateMetaViewport=function(){var e,n=this;this.currentMetaViewport?En.forEach(function(t){n.currentMetaViewportContent.includes(t)||(n.currentMetaViewport.content+=", "+t,n.isMetaViewportChanged=!0)}):((e=document.createElement("meta")).name="viewport",e.content="",En.forEach(function(t){e.content?e.content+=", "+t:e.content=t}),document.getElementsByTagName("head")[0].appendChild(e),this.currentMetaViewport=e,this.isMetaViewportChanged=!0)},x.prototype.removeMetaViewport=function(){this.isMetaViewportChanged&&(this.currentMetaViewportContent?this.currentMetaViewport.content=this.currentMetaViewportContent:(this.currentMetaViewport.content="width="+this.currentPageWidth+"px",this.currentMetaViewport.remove(),this.currentMetaViewportContent="",this.currentMetaViewport=null),this.isMetaViewportChanged=!1)},x.prototype.awaitLivechatAnimation=function(t){function e(){return i.iframe_wrapper.classList.contains(no)}function n(){return i.iframe_wrapper.classList.contains(io)}var i=this;switch(!0){case e():var o=setInterval(function(){i.isActive?e()||(clearInterval(o),t()):clearInterval(o)},20);break;case n():var r=setInterval(function(){i.isActive?clearInterval(r):n()||(clearInterval(r),t())},20);break;default:t()}},x.prototype.showBubble=function(){var t=this;this.awaitLivechatAnimation(function(){t.isActive||t.props.isButtonOpened()||("widget"===t.mode&&(t.sendBusMessage({method:"bubble",payload:{state:!0}}),t.iframe_wrapper.classList.remove(oo),t.iframe_wrapper.classList.add(to)),t.showBadge())})},x.prototype.hideBubble=function(){this.sendBusMessage({method:"bubble",payload:{state:!1}}),this.iframe_wrapper.classList.remove(to),this.iframe_wrapper.classList.add(oo),this.resizeIframeWrapper(null),this.hideBadge()},x.prototype.showGreeting=function(){this.isInited?this.isActive||this.sendBusMessage({method:"greeting"}):this.isGreetingAwaited=!0},x.prototype.resizeIframeWrapper=function(t){null===t?(this.iframe_wrapper.style.height=null,this.iframe_wrapper.style.width=null):(this.iframe_wrapper.style.height=parseFloat(t.height)+"px",this.iframe_wrapper.style.width=parseFloat(t.width)+"px")},x.prototype.centrifyIframeWrapper=function(t){var e,t=t.bubbleHeight,n=this.props.container,i=this.iframe_wrapper,o=this.props.position.v;(n||i||o)&&(n=(t-(t=n.offsetHeight))/2,i.style[o]=null,e=getComputedStyle(i).getPropertyValue(o),e=parseInt(e,10)-n,"top"===o?e+=9:"bottom"===o&&t<50&&(e+=2),i.style[o]=e+"px")},x.prototype.updateBadge=function(t){this.badgeCount=t,0<(this.badge.innerText=t)&&!this.isActive&&!this.props.isButtonOpened()?this.showBadge():this.hideBadge(),this.sendBusMessage({method:"badge",payload:{count:t}},"socials")},x.prototype.showBadge=function(){0<this.badgeCount&&!this.props.isButtonOpened()&&(this.badge.style.display=null)},x.prototype.hideBadge=function(){this.badge.style.display="none"},x.prototype.getUUID=function(){var t;return this.custom_user_id||((t=Li.get(ro))||(t=Mi(),Li.set(ro,t,{expires:365})),t)},x.prototype.setUUID=function(){var t=this.getUUID();this.sendBusMessage({method:"init",payload:{uuid:t}})},x.prototype.setupIframe=function(){var t=this,e=this.props,n=e.account_name,i=e.button,o=e.close_button,r=e.container,s=e.greeting,a=e.greeting_bot_params,c=e.host,l=e.locale,h=e.orientation,u=e.position,d=e.socket_url,p=e.site_id,f=e.session_uid,m=e.isCopyrightVisible,e=document.createElement("div"),g=(e.id="amo-livechat",e.className=[Qi,oo].concat("frame"===this.mode?["amo-livechat_frame"]:[Qi+"_"+u.v+"-"+u.h,Qi+"_"+h]).join(" "),e.style.background="frame"===this.mode?"none":"",document.createElement("style")),v=(g.id="","\n      html."+this.name+" .amo-brand {\n        display: none;\n      }\n    ");return this.chatContainer?e.classList.add("amo-livechat--no-mobile"):v+="\n        @media (max-width: 450px) {\n          html."+this.activeClassName+" {\n            overflow: hidden !important;\n          }\n          html."+this.activeClassName+" > body {\n            background: #fff !important;\n            overflow: hidden !important;\n          }\n          html."+this.activeClassName+" > body > *:not(.amo-button-holder):not(.amo-livechat-first-container) {\n            display: none;\n          }\n          ."+eo+" {\n            position: fixed;\n            top: 0 !important;\n            right: 0 !important;\n            bottom: 0 !important;\n            left: 0 !important;\n            width: 100%;\n            height: 100%;\n            max-height: unset;\n            min-height: unset;\n            border-radius: 0;\n          }\n        }",g.innerHTML=v,this.iframe=document.createElement("iframe"),this.iframe.title=this.brandName+" Live Chat",this.iframe.name=this.name,this.iframe.src=c+"/livechat/index.html?2aA-EmfOKwEEZQn6MSmqr",Wi=l,this.iframe.onload=function(){t.isInited=!0,t.iframe.contentWindow.postMessage(JSON.stringify({method:"configure",payload:{AMO_LIVECHAT_MODE:t.mode,AMO_LIVECHAT_USER_PARAMS:t.userData,AMO_LIVECHAT_USER_PROFILE:t.userProfile,AMO_LIVECHAT_USER_LOCALE:t.locale,AMO_LIVECHAT_THEME:t.theme,AMO_LIVECHAT_UUID:t.isEnabled&&t.getUUID(),AMO_LIVECHAT_SOCKET_URL:d,AMO_LIVECHAT_SITE_ID:p,AMO_LIVECHAT_SESSION_UID:f,AMO_LIVECHAT_BUTTON_ID:i.id,AMO_LIVECHAT_BUTTON_HASH:i.hash,AMO_LIVECHAT_BUTTON_HEIGHT:t.props.container.offsetHeight,AMO_LIVECHAT_IFRAME:t.name,AMO_LIVECHAT_LOCALE:l,AMO_LIVECHAT_GREETING:s?s.message:"",AMO_LIVECHAT_GREETING_BUTTONS:s?ui(s.message_buttons):[],AMO_LIVECHAT_GREETING_BOT:s?s.bot:{},AMO_LIVECHAT_GREETING_BOT_PARAMS:a||{},AMO_LIVECHAT_HEADER_COLOR:i.color,AMO_LIVECHAT_POSITION:u.v+"-"+u.h,AMO_LIVECHAT_ORIENTATION:h,AMO_LIVECHAT_DEFAULT_AVATAR:s&&s.chat_avatar_path?s.chat_avatar_path:"",AMO_LIVECHAT_TITLE:s&&s.chat_header?s.chat_header:n,AMO_LIVECHAT_USE_RESP_AVATAR:!s||""!==s.use_avatar,AMO_LIVECHAT_USE_NAME:!!s&&"Y"===s.use_name,AMO_LIVECHAT_CLOSE_VISIBLE:!!o,AMO_LIVECHAT_IS_COPYRIGHT_VISIBLE:m,AMO_BRAND_NAME:t.brandName}}),c),k("onChatReady"),"function"==typeof t.props.onIframeLoaded&&t.props.onIframeLoaded()},this.badge=document.createElement("div"),this.badge.className="amo-button-greeting-badge",this.hideBadge(),e.appendChild(this.iframe),(this.chatContainer||r).appendChild(e),r.appendChild(g),r.appendChild(this.badge),S.add({target:window,eventName:"resize",handler:this.handleWindowResize}),e},x.prototype.sendBusMessage=function(t,e){switch(e=void 0===e?"livechat":e){case"livechat":if(!this.iframe)return;this.iframe.contentWindow.postMessage(JSON.stringify(Object.assign({},{origin:this.name},t)),this.props.host);break;case"socials":var n=window.frames&&window.frames.social_iframe;n&&n.postMessage(t,"*");break;default:throw new Error("Unknown recipient name.")}},x.prototype.handleBusMessage=function(t){var e=this,n=this.props,i=n.greeting,o=n.host,r=n.modal;if(t.origin===o)try{var s=JSON.parse(t.data);if(s&&s.origin===this.name)switch(s.method){case"livechat:rendered":this.handleWindowResize(),k("onChatRenderDone");break;case"bubble":this.showBubble();break;case"bubble:hide":this.hideBubble();break;case"bubble:click":"function"==typeof this.props.forceButtonCollapse&&this.props.forceButtonCollapse(),this.show();break;case"bubble:autosize":var a=s.payload,c=a.height,l=a.width;this.resizeIframeWrapper({height:c,width:l});break;case"bubble:centrify":this.centrifyIframeWrapper(s.payload);break;case"badge":this.updateBadge(s.count||0);break;case"modal":r&&r.show(s.payload,this.sendBusMessage.bind(this));break;case"greeting:init":this.sendBusMessage({method:"toggle",payload:{state:this.isActive}}),this.isGreetingAwaited&&(this.isGreetingAwaited=!1,this.showGreeting()),this.hasGreetingReaction||(this.greeting=new A(i,function(){return e.showGreeting()}));break;case"conversations:received":this.renderConversationSelector({conversations:s.payload,selected:s.selected});break;case"conversations:update":s.selected&&this.conversationSelector.setSelectedConversation(s.selected),this.conversationSelector.setConversations(s.payload);break;case"conversation_selector:header-click":this.conversationSelector.busHeaderClick();break;case"livechat:multi-dialogs-enabled":this.isMultiDialogsEnabled=s.payload,this.isMultiDialogsEnabled||k("onConversationsChange",!1);break;default:throw new Error("Unexpected bus message method - "+s.method)}}catch(t){}},x.prototype.renderConversationSelector=function(t){var e,n=this,i=t.conversations,t=t.selected;this.conversationSelector||((e=document.createElement("div")).classList.add("amo-livechat__dialogs-selector"),this.iframe_wrapper.append(e),this.conversationSelector=new M({context:this,conversations:i,selectorWrapper:e,onConversationClick:function(){n.handleWindowResize()},onAddConversationClick:function(){n.handleWindowResize()},onOpenAllClick:function(){n.handleWindowResize()},onSelectorToggle:function(t){t="closed"!==t;n.iframe_wrapper.classList.toggle("amo-livechat--selector-opened",t),e.classList.toggle("amo-livechat__dialogs-selector--opened",t)}}),this.conversationSelector.render(),t&&this.conversationSelector.setSelectedConversation(t),this.livechatHeight&&this.conversationSelector.setParentHeight(this.livechatHeight))},x.prototype.handleWindowResize=function(){if(this.isActive){var t,e=window.innerHeight,n=window.innerWidth,i=this.iframe.parentNode.getBoundingClientRect(),o="top"===this.props.position.v?i.top:i.bottom,i=window.innerWidth<=450||window.screen.width<=450,r=0;switch(!0){case"top"===this.props.position.v:r=o+120;break;case"page"===this.props.position.v:r=240;break;default:r=e-o+120}this.livechatHeight=i?this.iframe.parentNode.offsetHeight:e-r,this._livechatHeight=this.livechatHeight,this.conversationSelector&&(t=i?this.iframe.parentNode.offsetHeight:this._livechatHeight,this.conversationSelector.setParentHeight(t),this.conversationSelector.shouldOpenSelector)&&(t=this.conversationSelector.getHeight(),this.livechatHeight=360<t?t+45:400),this.iframe.parentNode.style.height=i?"":this.livechatHeight+"px",this.sendBusMessage({method:"resize",payload:{width:n}})}},x.prototype.destroy=function(){this.greeting&&this.greeting.destroy()},{}),ao=(L.getConditionsItems=function(i){return void 0===i&&(i={}),Object.keys(i).reduce(function(t,e){var e=i[e],n=e.conditions[0]||{};return n&&(t[e.type]=n),t},{})},L.getKey=function(t){return"keyaction_reached"+t},L.compareWithMask=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e="");var i=!1;switch(parseInt(n,10)){case 1:i=t===e;break;case 2:i=t!==e;break;case 3:i=t.startsWith(e);break;case 4:i=t.endsWith(e);break;case 5:i=t.includes(e);break;case 6:i=!t.includes(e);break;default:i=!1}return i},L.prototype.parse=function(e){var n=this;Object.keys(e).forEach(function(t){var i=e[t],t=Object.keys(i.conditions);n.reactions[i.id]=i.reactions,t.length?n.conditions=t.reduce(function(t,e){var e=i.conditions[e],n=Mi();return t[n]={id:n,keyaction_id:i.id,constraint:i.constraint,items:L.getConditionsItems(e.settings)},t},n.conditions):n.react({keyaction_id:i.id,constraint:i.constraint})})},L.prototype.run=function(){var o=this,r=(this.listenPageScroll(),window.location.href.replace(window.location.origin,"")),s=parseInt(sessionStorage.getItem("amo_social_button_tracking_hits"),10)||0;Object.keys(this.conditions).forEach(function(t){var e=o.conditions[t].items,n=e.url_visited,i=e.page_hits,e=e.time_on_site;i&&i.value&&s>i.value&&o.reach(t,"page_hits"),n&&L.compareWithMask(r,n.value,n.mask)&&o.reach(t,"url_visited"),e&&e.value&&(o.conditionTimeouts[t]=setTimeout(o.reach.bind(o,t,"time_on_site"),1e3*e.value))})},L.prototype.reach=function(t,e){void 0===e&&(e=null);var n=this.conditions[t];n&&(this.reached[t]||(this.reached[t]=[]),e&&-1===this.reached[t].indexOf(e)&&this.reached[t].push(e),this.reached[t].length===Object.keys(n.items).length)&&this.react(n)},L.prototype.reachHook=function(n){var i=this;Object.keys(this.conditions).forEach(function(t){var t=i.conditions[t],e=(t.items||{}).custom_hook;e&&e.value===n&&i.reach(t.id,"custom_hook")})},L.prototype.react=function(t){var o,r=this;this.checkConstraint(t)&&(o=this.reactions[t.keyaction_id],Object.keys(o).forEach(function(t){var e=o[t];switch(e.action){case"amobutton_form":var n=e.settings.form.split("_"),i=n[0],n=n[1];r.showForm(i,n);break;case"amobutton_greeting":r.showGreeting();break;case"amobutton_animate":r.showAnimation(parseInt(e.settings.animation,10))}}),this.sendCRMReactions(t.keyaction_id),this.constraintTimeouts[t.keyaction_id]&&clearTimeout(this.constraintTimeouts[t.keyaction_id]),this.conditionTimeouts[t.id])&&clearTimeout(this.conditionTimeouts[t.id])},L.prototype.initChangePageUrl=function(){this.handlePageChangeUrl=this.run.bind(this),S.add({target:window,eventName:"popstate",handler:this.handlePageChangeUrl}),this.run()},L.prototype.checkConstraint=function(t){var e=t.keyaction_id,n=!1;try{switch(parseInt(t.constraint,10)){case 2:sessionStorage.getItem(L.getKey(e))||(sessionStorage.setItem(L.getKey(e),"y"),n=!0);break;case 4:localStorage.getItem(L.getKey(e))||(localStorage.setItem(L.getKey(e),"y"),n=!0);break;case 3:var i,o=(parseInt(localStorage.getItem(L.getKey(e,"shown_at")),10)||0)+864e5;Date.now()<o?(i=o-Date.now())/1e3<900&&(this.constraintTimeouts[e]=setTimeout(this.react.bind(this,t),i)):n=!0;break;default:so[L.getKey(e)]||(so[L.getKey(e)]="y",n=!0)}}catch(t){n=!1}return n},L.prototype.listenPageScroll=function(){for(var t=Object.keys(this.conditions),e=!1,n=0,i=t.length;n<i&&!(e=!!this.conditions[t[n]].items.scrolled_value);n+=1);e&&(this.handlePageScrollDebounced=Ri(this.handlePageScroll.bind(this),100),S.add({target:window,eventName:"scroll",handler:this.handlePageScrollDebounced}),this.handlePageScroll())},L.prototype.handlePageScroll=function(){var i=this,o=window.innerHeight*(window.innerHeight/document.documentElement.scrollHeight),r=window.pageYOffset+o;Object.keys(this.conditions).forEach(function(t){var e,n=i.conditions[t].items.scrolled_value;n&&(e=n.unit,n=n.value,e="%"===e?document.documentElement.scrollHeight*n/100:n,o+e<=r)&&i.reach(t,"scrolled_value")})},"amo-modal"),co="amo-modal_hidden";T.prototype.initModalIframe=function(){var e=this;return this.isInited?Promise.resolve():new Promise(function(t){e.isInited=!0,e.isActive=!1,e.name="amo-modal-iframe-"+Mi(8),S.add({target:window,eventName:"message",handler:function(t){return e.handleBusMessage(t)}}),e.setupIframe().then(t)})},T.prototype.setupIframe=function(){var r=this;return new Promise(function(n){var t=r.props,i=t.host,t=t.container,o=document.createElement("div"),e=(o.id="amo-modal",o.className=[ao,co].join(" "),document.createElement("style"));e.type="text/css",e.id="",e.innerHTML="\n        ."+ao+" {\n          position: fixed;\n          top: 0;\n          right: 0;\n          bottom: 0;\n          left: 0;\n          width: 100vw;\n          height: 100vh;\n          z-index: 2147483648;\n        }\n        ."+ao+" > iframe {\n          border: none;\n          width: 100%;\n          height: 100%;\n        }\n        ."+co+" {\n          display: none;\n        }\n      ",r.iframe=document.createElement("iframe"),r.iframe.title=r.brandName+" Media Modal",r.iframe.name=r.name,r.iframe.src=i+"/modal/index.html?2aA-EmfOKwEEZQn6MSmqr",r.iframe.onload=function(){function e(){window.addEventListener("message",function(t){try{("modal:rendered"===JSON.parse(t.data).method?n:e)()}catch(t){e()}},{once:!0})}e(),r.iframe.contentWindow.postMessage(JSON.stringify({method:"configure",payload:{AMO_MODAL_IFRAME:r.name}}),i),r.iframe_wrapper=o},o.appendChild(r.iframe),o.appendChild(e),t.appendChild(o)})},T.prototype.show=function(t,e){var n=this;this.isActive||(this.sendBusMessageToLivechat=e,this.initModalIframe().then(function(){n.showModal(t)}))},T.prototype.close=function(){this.isActive&&(this.isActive=!1,ri([this.props.container]),document.documentElement.classList.remove(this.name),this.iframe_wrapper.classList.add(co),document.removeEventListener("keydown",this.closeOnEsc),this.sendBusMessage({method:"clear"}))},T.prototype.showModal=function(t){this.iframe_wrapper&&(this.iframe_wrapper.classList.remove(co),document.documentElement.classList.add(this.name),oi([this.props.container]),this.iframe.focus(),this.isActive=!0,this.sendBusMessage({method:"show",payload:t}))},T.prototype.sendBusMessage=function(t){this.iframe&&this.iframe.contentWindow.postMessage(JSON.stringify(Object.assign({},{origin:this.name},t)),this.props.host)},T.prototype.handleBusMessage=function(t){if(t.origin===this.props.host)try{var e=JSON.parse(t.data);if(e&&e.origin===this.name)switch(e.method){case"close":this.close();break;case"event":this.sendBusMessageToLivechat({method:"event",payload:e.payload});break;default:throw new Error("Unexpected bus message method - "+e.method)}}catch(t){}};o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==E?E:"undefined"!=typeof self?self:{};function lo(t,e){return t(e={exports:{}},e.exports),e.exports}for(var ho=lo(function(t){var e,n,i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);i?(e=new Uint8Array(16),t.exports=function(){return i(e),e}):(n=new Array(16),t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n})}),uo=[],po=0;po<256;++po)uo[po]=(po+256).toString(16).substr(1);function fo(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(Ao&&Ao in Object(t)?ko:So)(t)}function mo(t){return null!=t&&"object"==typeof t}var go=function(t,e){var e=e||0,n=uo;return[n[t[e++]],n[t[e++]],n[t[e++]],n[t[e++]],"-",n[t[e++]],n[t[e++]],"-",n[t[e++]],n[t[e++]],"-",n[t[e++]],n[t[e++]],"-",n[t[e++]],n[t[e++]],n[t[e++]],n[t[e++]],n[t[e++]],n[t[+e]]].join("")},vo=function(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o},_o="object"==typeof o&&o&&o.Object===Object&&o,o="object"==typeof self&&self&&self.Object===Object&&self,yo=_o||o||Function("return this")(),o=yo.Symbol,bo=(a=Object.prototype).hasOwnProperty,wo=a.toString,Co=o?o.toStringTag:void 0,ko=function(t){var e=bo.call(t,Co),n=t[Co];try{var i=!(t[Co]=void 0)}catch(t){}var o=wo.call(t);return i&&(e?t[Co]=n:delete t[Co]),o},Io=Object.prototype.toString,So=function(t){return Io.call(t)},Ao=o?o.toStringTag:void 0,a=function(t){return mo(t)&&"[object Arguments]"==fo(t)},Oo=(o=Object.prototype).hasOwnProperty,Eo=o.propertyIsEnumerable,Mo=a(function(){return arguments}())?a:function(t){return mo(t)&&Oo.call(t,"callee")&&!Eo.call(t,"callee")},xo=Array.isArray;function Lo(){return!1}function To(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}var jo=lo(function(t,e){var n=(e=e&&!e.nodeType&&e)&&t&&!t.nodeType&&t,e=(n=n&&n.exports===e?yo.Buffer:void 0)?n.isBuffer:void 0;t.exports=e||Lo}),No=/^(?:0|[1-9]\d*)$/,j={};function Bo(t){return null==t?[]:(t=(Wo(t=e=t)?zo:Go)(t),vo(t,function(t){return e[t]}));var e}j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j["[object Arguments]"]=j["[object Array]"]=j["[object ArrayBuffer]"]=j["[object Boolean]"]=j["[object DataView]"]=j["[object Date]"]=j["[object Error]"]=j["[object Function]"]=j["[object Map]"]=j["[object Number]"]=j["[object Object]"]=j["[object RegExp]"]=j["[object Set]"]=j["[object String]"]=j["[object WeakMap]"]=!1;var Fo,Ro,o=function(e){return function(t){return e(t)}},Po=(a=(a=lo(function(t,e){var n=(e=e&&!e.nodeType&&e)&&t&&!t.nodeType&&t,i=n&&n.exports===e&&_o.process,e=function(){try{var t=n&&n.require&&n.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=e}))&&a.isTypedArray)?o(a):function(t){return mo(t)&&To(t.length)&&!!j[fo(t)]},Ho=Object.prototype.hasOwnProperty,zo=function(t,e){var n,i,o,r,s=xo(t),a=!s&&Mo(t),c=!s&&!a&&jo(t),l=!s&&!a&&!c&&Po(t),h=s||a||c||l,u=h?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],d=u.length;for(n in t)!e&&!Ho.call(t,n)||h&&("length"==n||c&&("offset"==n||"parent"==n)||l&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||(r=void 0,r=typeof(i=n),!!(o=null==(o=d)?9007199254740991:o)&&("number"==r||"symbol"!=r&&No.test(i))&&-1<i&&i%1==0&&i<o))||u.push(n);return u},Do=Object.prototype,Vo=(Fo=Object.keys,Ro=Object,function(t){return Fo(Ro(t))}),Uo=Object.prototype.hasOwnProperty,Go=function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||Do))return Vo(t);var e,n,i,o=[];for(i in Object(t))Uo.call(t,i)&&"constructor"!=i&&o.push(i);return o},Wo=function(t){return null!=t&&To(t.length)&&(e=typeof(t=t),!!(null==t||"object"!=e&&"function"!=e||"[object Function]"!=(t=fo(t))&&"[object GeneratorFunction]"!=t&&"[object AsyncFunction]"!=t&&"[object Proxy]"!=t));var e},N={TRACKING_PAGES:"amo_social_button_tracking_pages",TRACKING_HITS:"amo_social_button_tracking_hits",TRACKING_TIME:"amo_social_button_tracking_time",TRACKING_REFERRER:"amo_social_button_tracking_referrer",TRACKING_UUID:"amo_social_button_tracking_uuid",TRACKING_SESSION_ID:"amo_social_button_tracking_session_id",LINKED_CONTACTS:"amo_social_button_linked_contacts",IS_TRACKING_LINK_SENT:"is_send_follow_link"},Zo=!1,Ko=null;function qo(){return document.title?document.title+" ("+window.location.pathname+")":window.location.pathname}function Yo(){var t=window.sessionStorage.getItem(N.TRACKING_UUID);return t||(t=function(t,e,n){var i=e&&n||0,o=("string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),(t=t||{}).random||(t.rng||ho)());if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var r=0;r<16;++r)e[i+r]=o[r];return e||go(o)}(),window.sessionStorage.setItem(N.TRACKING_UUID,t)),t}function Xo(){var t=window.sessionStorage.getItem(N.TRACKING_SESSION_ID);return t||(t=function(t){void 0===t&&(t=21);for(var e="",n=crypto.getRandomValues(new Uint8Array(t));t--;){var i=63&n[t];e+=i<36?i.toString(36):i<62?(i-26).toString(36).toUpperCase():i<63?"_":"-"}return e}(11),window.sessionStorage.setItem(N.TRACKING_SESSION_ID,t)),t}var o="%[a-f0-9]{2}",Jo=new RegExp(o,"gi"),$o=new RegExp("("+o+")+","gi");function Qo(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){for(var n=e,i={"%FE%FF":"��","%FF%FE":"��"},o=$o.exec(n);o;){try{i[o[0]]=decodeURIComponent(o[0])}catch(t){var r=function(e){try{return decodeURIComponent(e)}catch(t){for(var n=e.match(Jo),i=1;i<n.length;i++)n=(e=function t(e,n){try{return decodeURIComponent(e.join(""))}catch(t){}var i;return 1===e.length?e:(i=e.slice(0,n=n||1),e=e.slice(n),Array.prototype.concat.call([],t(i),t(e)))}(n,i).join("")).match(Jo);return e}}(o[0]);r!==o[0]&&(i[o[0]]=r)}o=$o.exec(n)}i["%C2"]="�";for(var s=Object.keys(i),a=0;a<s.length;a++)var c=s[a],n=n.replace(new RegExp(c,"g"),i[c]);return n}}function tr(t,e){if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");var n;return""===e||-1===(n=t.indexOf(e))?[t]:[t.slice(0,n),t.slice(n+e.length)]}var er=lo(function(t,s){function m(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(t,e){return e.encode?e.strict?encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}):encodeURIComponent(t):t}function g(t,e){return e.decode?Qo(t):t}function a(t){var e=t.indexOf("#");return-1!==e?t.slice(0,e):t}function o(t){var e=(t=a(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function v(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function r(t,e){m((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);var n=function(i){var o;switch(i.arrayFormat){case"index":return function(t,e,n){o=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),o?(void 0===n[t]&&(n[t]={}),n[t][o[1]]=e):n[t]=e};case"bracket":return function(t,e,n){o=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),o?void 0===n[t]?n[t]=[e]:n[t]=[].concat(n[t],e):n[t]=e};case"comma":case"separator":return function(t,e,n){e="string"==typeof e&&-1<e.split("").indexOf(i.arrayFormatSeparator)?e.split(i.arrayFormatSeparator).map(function(t){return g(t,i)}):null===e?e:g(e,i),n[t]=e};default:return function(t,e,n){void 0===n[t]?n[t]=e:n[t]=[].concat(n[t],e)}}}(e),i=Object.create(null);if("string"!=typeof t)return i;if(!(t=t.trim().replace(/^[?#&]/,"")))return i;for(var o=0,r=t.split("&");o<r.length;o+=1){var s=r[o],a=(s=tr(e.decode?s.replace(/\+/g," "):s,"="))[0],s=void 0===(s=s[1])?null:["comma","separator"].includes(e.arrayFormat)?s:g(s,e);n(g(a,e),s,i)}for(var c=0,l=Object.keys(i);c<l.length;c+=1){var h=l[c],u=i[h];if("object"==typeof u&&null!==u)for(var d=0,p=Object.keys(u);d<p.length;d+=1){var f=p[d];u[f]=v(u[f],e)}else i[h]=v(u,e)}return!1===e.sort?i:(!0===e.sort?Object.keys(i).sort():Object.keys(i).sort(e.sort)).reduce(function(t,e){var n=i[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]}):e}(n):t[e]=n,t},Object.create(null))}s.extract=o,s.parse=r,s.stringify=function(n,i){if(!n)return"";m((i=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},i)).arrayFormatSeparator);for(var o=function(o){switch(o.arrayFormat){case"index":return function(i){return function(t,e){var n=t.length;return void 0===e||o.skipNull&&null===e||o.skipEmptyString&&""===e?t:null===e?t.concat([[c(i,o),"[",n,"]"].join("")]):t.concat([[c(i,o),"[",c(n,o),"]=",c(e,o)].join("")])}};case"bracket":return function(n){return function(t,e){return void 0===e||o.skipNull&&null===e||o.skipEmptyString&&""===e?t:null===e?t.concat([[c(n,o),"[]"].join("")]):t.concat([[c(n,o),"[]=",c(e,o)].join("")])}};case"comma":case"separator":return function(n){return function(t,e){return null==e||0===e.length?t:0===t.length?[[c(n,o),"=",c(e,o)].join("")]:[[t,c(e,o)].join(o.arrayFormatSeparator)]}};default:return function(n){return function(t,e){return void 0===e||o.skipNull&&null===e||o.skipEmptyString&&""===e?t:null===e?t.concat([c(n,o)]):t.concat([[c(n,o),"=",c(e,o)].join("")])}}}}(i),t={},e=0,r=Object.keys(n);e<r.length;e+=1){var s=r[e];i.skipNull&&null==n[s]||i.skipEmptyString&&""===n[s]||(t[s]=n[s])}var a=Object.keys(t);return!1!==i.sort&&a.sort(i.sort),a.map(function(t){var e=n[t];return void 0===e?"":null===e?c(t,i):Array.isArray(e)?e.reduce(o(t),[]).join("&"):c(t,i)+"="+c(e,i)}).filter(function(t){return 0<t.length}).join("&")},s.parseUrl=function(t,e){e=Object.assign({decode:!0},e);var n=(i=tr(t,"#"))[0],i=i[1];return Object.assign({url:n.split("?")[0]||"",query:r(o(t),e)},e&&e.parseFragmentIdentifier&&i?{fragmentIdentifier:g(i,e)}:{})},s.stringifyUrl=function(t,e){e=Object.assign({encode:!0,strict:!0},e);var n,i=a(t.url).split("?")[0]||"",o=s.extract(t.url),o=s.parse(o,{sort:!1}),o=Object.assign(o,t.query),o=(o=s.stringify(o,e))&&"?"+o,r=-1!==(n=(r=t.url).indexOf("#"))?r.slice(n):"";return""+i+o+(t.fragmentIdentifier?"#"+c(t.fragmentIdentifier,e):r)}}),nr=(er.extract,er.parse,er.stringify,er.parseUrl,er.stringifyUrl,["from","openstat_service","openstat_campaign","openstat_ad","openstat_source","utm_source","utm_medium","utm_campaign","utm_content","utm_term","utm_referrer","gсlid","fbclid","yclid","referrer"]),ir={baseURL:""},or=!1,rr=!1;function sr(t){switch(t.data){case"SET_AMO_PIXEL_READY":rr=!(or=!0);break;case"IS_AMO_PIXEL_READY?":or?t.source.postMessage("AMO_PIXEL_READY",t.origin):rr?t.source.postMessage("AMO_PIXEL_LOADING",t.origin):(rr=!0,t.source.postMessage("AMO_PIXEL_NOT_READY",t.origin))}}window.AMO_PIXEL_CLIENT||(window.addEventListener("message",sr),window.AMO_PIXEL_CLIENT={getSessionUid:Yo,getShortSessionId:Xo,getTrackingLink:function(){if(!window.AMOCRM_NO_TRACKING&&!window.sessionStorage.getItem(N.IS_TRACKING_LINK_SENT))return window.sessionStorage.setItem(N.IS_TRACKING_LINK_SENT,"y"),document.location.href},makeMetadata:function(){if(!Ko){var t,e;try{t=JSON.parse(window.sessionStorage.getItem(N.TRACKING_PAGES)||{})}catch(e){t={}}e=(parseFloat(window.sessionStorage.getItem(N.TRACKING_TIME))||0)/1e3,Ko={hits:parseInt(window.sessionStorage.getItem(N.TRACKING_HITS),10)||0,pages:Object.keys(t),referrer:window.sessionStorage.getItem(N.TRACKING_REFERRER),time:parseInt(e,10),page:""},window.AMOCRM_NO_TRACKING||(Ko.page=qo())}return Ko},registerHit:function(){if(!Zo){var t,e=window.sessionStorage.getItem(N.TRACKING_REFERRER),n=document.referrer.split("/")[2],i=window.location.hostname,o=parseInt(window.sessionStorage.getItem(N.TRACKING_HITS),10)||0,r=parseFloat(window.sessionStorage.getItem(N.TRACKING_TIME),10)||0;Yo(),Xo();try{t=JSON.parse(window.sessionStorage.getItem(N.TRACKING_PAGES)||{})}catch(e){t={}}n&&n!==e&&n!==i&&(window.sessionStorage.setItem(N.TRACKING_REFERRER,n),window.sessionStorage.setItem(N.TRACKING_TIME,"0"),o=0,t={}),window.AMOCRM_NO_TRACKING||(t[qo()]=!0,window.sessionStorage.setItem(N.TRACKING_PAGES,JSON.stringify(t))),window.sessionStorage.setItem(N.TRACKING_TIME,r.toString()),window.sessionStorage.setItem(N.TRACKING_HITS,(o+1).toString()),window.sessionStorage.setItem(N.TRACKING_TIME,r.toString()),window.window.addEventListener("beforeunload",function(){r+=performance.now(),window.sessionStorage.setItem(N.TRACKING_TIME,r.toString())}),Zo=!0}},extractTrackingParamsFromUrl:function(){return n=er.parse(location.search),e=nr,Object.keys(n).filter(function(t){return 0<=e.indexOf(t)}).reduce(function(t,e){return Object.assign(t,((t={})[e]=n[e],t))},{});var n,e},extractTrackingParamsFromTrackers:function(l){var t=function(){var i,t;function o(t){"undefined"!=typeof ga?ga(function(){t([ga.getAll().map(function(t){return{key:"gclientid",value:t.get("clientId")}})[0]])}):t([])}function r(e){var n;"undefined"!=typeof Ya?(n=(Ya.Metrika||Ya.Metrika2).counters().map(function(t){return t&&t.id}).filter(function(t){return t})[0],"undefined"!=typeof ym?ym(n,"getClientID",function(t){e([{key:"_ym_counter",value:n},{key:"_ym_uid",value:t}])}):void 0!==window["yaCounter"+n]?e([{key:"_ym_counter",value:n},{key:"_ym_uid",value:window["yaCounter"+n].getClientID()}]):e([])):e([])}function s(t){void 0!==window.roistat?t([{key:"roistat",value:window.roistat.getVisit()}]):t([])}i=function(t){function e(){c=0,n.forEach(function(t){c++;try{t(function(t){var e,t=s.indexOf(t);-1<t&&((e=Array.prototype.slice.call(arguments,1))&&e.length&&e.filter(function(t){return t.length}).length&&(s.splice(t,1),r=r.concat(e)),s.length||(clearTimeout(a),clearInterval(o),window.removeEventListener("beforeunload",i.bind(null,r)),i(r)))}.bind(null,c))}catch(t){}})}var n,i,o,r,s,a,c;n=t,i=l,r=[],s=[],a=setTimeout(function(){clearInterval(o),i(r),window.removeEventListener("beforeunload",i.bind(null,r))},5e3),window.addEventListener("beforeunload",i.bind(null,r)),c=0,n.forEach(function(){c++,s.push(c)}),e(),s.length&&(o=setInterval(function(){n.length&&e()},500))},(t=new XMLHttpRequest).onload=function(){var e;try{e=JSON.parse(t.response)}catch(t){e={}}var n=[o,r,s];Object.keys(e).forEach(function(t){n.push(new Function(e[t]))}),i(n)},t.onerror=function(t){var e=[o,r,s];console.error("Failed to get custom trackers "+t.currentTarget.statusText),i(e)},t.open("GET",ir.baseURL+"/callbacks/?id="+ir.id+"&hash="+ir.hash),t.send()};"complete"===document.readyState?t():document.onreadystatechange=function(){"complete"===document.readyState&&t()}},configure:function(t){Object.assign(ir,t)},canSetupContactForHuman:function(t){var e;try{e=JSON.parse(window.sessionStorage.getItem(N.LINKED_CONTACTS))}catch(t){}if(-1===(e=e||[]).indexOf(t))return e.push(t),window.sessionStorage.setItem(N.LINKED_CONTACTS,JSON.stringify(e)),t},destroy:function(){window.removeEventListener("message",sr),Bo(N).forEach(function(t){window.sessionStorage.removeItem(t)}),delete window.AMO_PIXEL_CLIENT}});function B(t){this.document=document,this.window=window,this.meta_params=t,this.bot_params={},this.init(t)}B.prototype.init=function(t){var e,n,i=this,o=(t=t||{}).id||0,r=t.hash||!1,s="ru"!==t.locale?"com":"ru",t=t.locale&&-1<["en","ru","es","pt"].indexOf(t.locale)?t.locale:"en",a=i.document.querySelector("#crm_plugin_script")||i.document.querySelector("#amo_social_button_script"),c=a.parentNode,a=a.src;i.id=o,i.hash=r,i.collapsed=!0,i.lang_id=t,i.modal=null,i.greetingAwaited=!1,i.keyactionsAwaited=[],i.user_config=window.amoSocialButtonConfig||window.crmPluginConfig||{},i.socialFrameReady=!1,i.DEFAULT_Z_INDEX=parseInt($i()),i.parent_node="HEAD"!==c.tagName?c:i.document.body,new Yn({only_static:!0,onFullyLoaded:function(t){i.sendOnlyStaticLoadTime=function(){i.livechat.sendBusMessage({method:"button_loaded",payload:{time:t,brand:i.settings.brandName,country:i.settings.country,current_bundle_cache_id:"2aA-EmfOKwEEZQn6MSmqr"}})},i.chat_frame_ready&&i.sendOnlyStaticLoadTime()}}),t=a,t=new URL(t),c=t.protocol,t=t.hostname.split("."),a=t[0],e=t.slice(1).join("."),n="",a.slice(0,a.length-2)in C&&(n=a.slice(-2)),C.gso=c+"//gso"+n+"."+e,C.forms=c+"//forms"+n+"."+e,C.button=c+"//button"+n+"."+e,n="",3<t.length&&(n="com"===t[t.length-1]?"en":"ru"),C.promo=c+"//www"+n+"."+e,i.server_host=C.gso,i.forms_host=C.forms+"/forms/assets/js/amoforms.js",i.locale=s,0<o&&r&&i.get_settings(o,r),i.langs={en:{made_by:"Made by ","%brand% CRM Plugin social network list":"%brand% CRM Plugin social network list"},ru:{made_by:"Сделано в ","%brand% CRM Plugin social network list":"%brand% CRM Plugin список социальных сетей"},es:{made_by:"Hecho por ","%brand% CRM Plugin social network list":"%brand% CRM Plugin lista de redes sociales"},pt:{made_by:"Feito por ","%brand% CRM Plugin social network list":"Lista de redes sociais %brand% CRM Plugin"}}},B.prototype.get_settings=function(s,t){var a=this,t=a.server_host+"/social_button/settings/?client_version=3&id="+s+"&hash="+t,c=new XMLHttpRequest;c.onload=function(){if(200===c.status){var t,n=Sn.toASCII(a.window.location.hostname),i=!1,o={},e=n.split("."),r=(e.shift(),e.join("."));try{if(t=JSON.parse(c.response),o=t.response.result?t.response:t.response[s],!/Macintosh|iPad|iPhone/.test(navigator.userAgent)&&o.settings.social_services&&(o.settings.social_services=Object.assign({},In(o.settings.social_services,{type:Mn}))),!Object.keys(o.settings.social_services).length)return;Object.keys(o.domains).map(function(t,e){if(!1===i&&-1!==Sn.toASCII(o.domains[t]).search(n))return i=!0,a.check_settings(o),AMO_PIXEL_CLIENT.registerHit(),a.render(),!1}),!i&&o.settings&&o.settings.base_domains&&Object.keys(o.settings.base_domains).map(function(t,e){if(!1===i){t=Sn.toASCII(o.settings.base_domains[t]);if(r===t)return i=!0,a.check_settings(o),AMO_PIXEL_CLIENT.registerHit(),a.render(),!1}})}catch(t){console.error(t)}a.meta_params.inline=a.meta_params.inline&&!a.isOnlyOneButton()}},c.open("GET",t),c.send()},B.prototype.check_settings=function(t){var e,n;switch(this.settings=t.settings,this.settings.button.size=this.meta_params.inline?this.settings.button.size-10:this.settings.button.size,this.settings.date_update=t.date_update,this.settings.keyactions=t.key_actions||{},this.settings.brandName=t.brand_name,this.settings.country=t.country,this.getVersion()){case 3:case 2:e=parseInt(this.settings.button.size),n=parseInt(this.settings.button.radius),this.orientation=parseInt(this.settings.button.orientation),this.settings.button.size=isNaN(e)?50:e,this.settings.button.radius=isNaN(n)?35:n,"Y"===this.settings.button.fixed&&(this.parent_node=document.body);break;default:e=parseInt(this.settings.button.button_size),this.settings.button.button_size=isNaN(e)?50:e,this.orientation=parseInt(this.settings.button.orient),this.settings.button.is_fixed||this._checkIfVerticalNotFixed(),"Y"===this.settings.button.is_fixed&&(this.parent_node=document.body)}this.services_count=Object.keys(this.settings.social_services).length},B.prototype.getVersion=function(){return this.settings?this.settings.version||1:2},B.prototype._checkIfVerticalNotFixed=function(){this.settings.button.button_position="bottom-left"},B.prototype.render=function(){var n=this,i=n.getVersion(),o=1===i?[n.server_host+"/css/main.css"]:[n.server_host+"/build/css/index.css?2aA-EmfOKwEEZQn6MSmqr"],r=0;o.forEach(function(t){var e=document.createElement("link");e.rel="stylesheet",e.href=t,e.onload=function(){++r===o.length&&(1===i?n.render_frame():n.renderFrame())},n.document.head.appendChild(e)})},B.prototype.getZIndexForElement=function(t){switch(t){case"mainHolder":return this.DEFAULT_Z_INDEX+1;case"socialIFrame":return this.DEFAULT_Z_INDEX+2;case"livechat":return this.DEFAULT_Z_INDEX+3;default:return this.DEFAULT_Z_INDEX}},B.prototype.renderFrame=function(){var e=this,n=this,t=n.getVersion(),i=this.server_host+"/buttons/v"+t+"/html/"+this.hash+".html?"+this.settings.date_update,o=this.document.createElement("iframe"),r={button:null,holder:null,link_holder:null,animation:this.getAnimation(),theme:this.settings.button.theme,size:parseInt(this.settings.button.size),position:this.makePositionParams(),orientation:parseInt(this.settings.button.orientation),is_fixed:"Y"===this.settings.button.fixed};r.holder=this.renderHolder(r),r.button=this.renderMainButton(r),this.buttonHolderEl=r.holder,this.setFrame(o,i,t,r),r.holder.insertBefore(o,r.holder.children[0]),r.link_holder=this.renderBrand(r),this.setOrientation(o,r),this.setBrandPosition(r),this.setPosition(r),this.displayAnimation(r),o.onload=function(){n.set_social(n.settings),n.initApiMeta(),S.add({target:r.button,eventName:"click",handler:function(t){return t.stopPropagation(),n.onButtonClick(r),!1}}),n.forceButtonCollapse=function(){n.onButtonClick(r,{collapseSocials:!0})},n.addClicksListener()},this.initModal(r),this.initFormModal(r),this.initKeyActions(r),Bn(function(t){switch(t){case"livechat":return e.livechat;case"keyactions":return e.keyactions;case"button":return{setupContactForHuman:e.setupContactForHuman.bind(e),destroy:e.destroy.bind(e)};default:return null}})},B.prototype.isOnlyOneButton=function(){var t=Object.keys(this.settings.social_services);return 1===t.length&&this.settings.social_services[t[0]].type||""},B.prototype.getButtonColor=function(){return this.user_config.color||this.settings.button.color},B.prototype.getButtonRadius=function(){return this.user_config.radius||this.settings.button.radius},B.prototype.getAnimation=function(){return this.settings.button.animation?parseInt(this.settings.button.animation):0},B.prototype.onButtonClick=function(t,e){var n,i,o,r=this;this.meta_params.inline&&this.is_not_first_click?this.onMessage({data:"click_button"}):(this.is_not_first_click=!0,e=e&&e.collapseSocials||!1,n=!t.button.classList.contains("amo-button--only-livechat"),i=this.getParamToNull(),o=rt(i),this.collapsed?(this.collapsed=!1,n&&!e&&(this.soc_frame.elem[i]=this.soc_frame[i],this.soc_frame.elem.style["min"+o]=this.soc_frame[i]+"px"),t.button.classList.add("maincollapsed"),this.meta_params.inline?(this.setBackgroundColor(t.button,"transparent"),this.setBorderColor(t.button,"transparent")):(this.setBackgroundColor(t.button,"white"===t.theme?"#FFF":"#000"),this.setBorderColor(t.button,"white"===t.theme?this.getButtonColor():"#FFF")),this.setHolderPadding(t),t.link_holder.classList.add("collapsed"),this.hideAnimation(t.button),this.livechat&&(this.livechat.hideBubble(),n||this.livechat.show())):(this.collapsed=!0,t.button.classList.remove("maincollapsed"),t.link_holder.classList.remove("collapsed"),this.resetHolderPadding(t),this.livechat&&(this.livechat.hide(),this.livechat.isEnabled)&&this.livechat.showBubble(),this.is_form_shown&&this.hideForm(),this.setBackgroundColor(t.button,this.getButtonColor()),this.setBorderColor(t.button,""),this.displayAnimation(t),setTimeout(function(){!0===r.collapsed&&(r.soc_frame.elem[i]=0,r.soc_frame.elem.style["min"+o]="0px")},1e3)),this.soc_frame.elem.contentWindow.postMessage({method:"button:click",payload:{showSocials:!this.collapsed&&!e,isInline:this.meta_params.inline,buttonTheme:t.theme}},"*"))},B.prototype.displayAnimation=function(t){var e="";switch(t.animation){case 0:return;case 1:e="amo_animation_waves";break;case 2:e="amo_animation_tremble";break;case 3:e="amo_animation_shake"}e&&(t.button.className+=" "+e)},B.prototype.hideAnimation=function(t){t.className=t.className.replace(/\bamo_animation_[a-z]+\b/g,"")},B.prototype.isMobileDevice=function(){return(0<window.innerWidth?window.innerWidth:screen.width)<640},B.prototype.makePositionParams=function(){var t,e=this.isMobileDevice(),n=parseInt(this.settings.button.position)%2==0?"right":"left",i=2<parseInt(this.settings.button.position)?"bottom":"top",e=e?(t=this.settings.button.x_offset_m,this.settings.button.y_offset_m):(t=this.settings.button.x_offset,this.settings.button.y_offset);return{x:t,y:e,v:i,h:n}},B.prototype.setBrandPosition=function(t){if(this.disable_titles=!1,2===t.orientation){if(t.position.y<24)return void(t.link_holder.style.display="none");"top"===t.position.v&&(t.link_holder.style.top="-20px"),"bottom"===t.position.v&&(t.link_holder.style.bottom="-18px")}else{if("bottom"===t.position.v&&t.position.y<24)return this.disable_titles=!0,void(t.link_holder.style.display="none");this.meta_params.inline&&(t.link_holder.style[t.position.h]=0),t.link_holder.style.bottom="-18px"}t.position.x<20&&t.link_holder.classList.add("amo-brand_to-"+t.position.h)},B.prototype.renderHolder=function(t){var e=this.document.createElement("div"),n=this.isOnlyOneButton(),i="livechat"===n,o=n&&!i?n:"";return e.className="amo-button-holder "+(2===t.orientation?"amo-vertical":"amo-horisontal"),e.style.position=t.is_fixed?"fixed":"absolute",e.innerHTML=['<div class="amo-button amo-button--main '+(i?"amo-button--only-livechat":"")+" "+(o?"amo-button--only-social":"")+' js-amo-button" id="amobutton" data-social="'+o+'" style="width: '+t.size+"px; height:"+t.size+"px; z-index: "+this.getZIndexForElement("livechat")+'">','<div class="amo-button--main-icon'+(this.meta_params.inline?" amo-button--no-fill":"")+'">','<div class="amo-button--main-icon-inner">',function(t){switch(t){case"livechat":return'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="24" viewBox="0 0 30 24" fill="none">  <path fill="#fff" d="M20.612 0H9.505C4.565 0 .56 4.433.56 9.895c0 4.368 2.558 8.064 6.105 9.38L10.916 24l3.803-4.206h5.893c4.942 0 8.947-4.43 8.947-9.899C29.559 4.433 25.553 0 20.612 0ZM8.154 11.998c-1.096 0-1.985-.98-1.985-2.195 0-1.211.889-2.196 1.985-2.196s1.985.984 1.985 2.196c0 1.214-.889 2.195-1.985 2.195Zm6.905 0c-1.096 0-1.985-.98-1.985-2.195 0-1.211.888-2.196 1.985-2.196 1.096 0 1.985.984 1.985 2.196 0 1.214-.89 2.195-1.985 2.195Zm6.905 0c-1.097 0-1.986-.98-1.986-2.195 0-1.211.889-2.196 1.986-2.196 1.096 0 1.985.984 1.985 2.196 0 1.214-.89 2.195-1.985 2.195Z"/> </svg>';case"telegram":return'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">  <path fill="#E1E1E1" d="M18.186 37.327c-.965 0-.8-.37-1.134-1.303l-2.838-9.488 21.85-13.165"/> <path fill="#CDCDCD" d="M18.186 37.328c.745 0 1.074-.346 1.49-.757l3.973-3.923-4.956-3.035"/> <path fill="#fff" d="m18.693 29.614 12.007 9.01c1.37.768 2.36.37 2.7-1.292l4.888-23.392c.5-2.038-.765-2.962-2.075-2.357l-28.7 11.239c-1.96.798-1.948 1.908-.357 2.403l7.365 2.334 17.05-10.925c.805-.496 1.544-.23.938.317"/> </svg>';case"facebook":case"messenger":return'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">  <path fill="#fff" fill-rule="evenodd" d="M24 6C13.86 6 6 13.428 6 23.46c0 5.248 2.151 9.783 5.653 12.916.294.264.471.63.486 1.024l.098 3.202a1.443 1.443 0 0 0 2.02 1.275l3.571-1.576c.305-.134.642-.159.96-.072 1.64.453 3.39.692 5.212.692 10.14 0 18-7.428 18-17.46C42 13.427 34.14 6 24 6Zm10.807 13.433-5.288 8.388a2.702 2.702 0 0 1-3.904.72l-4.204-3.154a1.081 1.081 0 0 0-1.3.004l-5.68 4.31c-.756.575-1.749-.334-1.238-1.138l5.287-8.387a2.702 2.702 0 0 1 3.905-.721l4.204 3.154c.388.29.917.286 1.3-.003l5.68-4.31c.756-.576 1.749.333 1.238 1.137Z" clip-rule="evenodd"/> </svg>';case"viber":return'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">  <path fill="#fff" d="M37.937 10.345c-.946-.876-4.757-3.677-13.246-3.717 0 0-10.015-.611-14.897 3.918-2.717 2.749-3.674 6.771-3.771 11.762-.103 4.99-.234 14.331 8.676 16.867h.006l-.006 3.867s-.057 1.567.963 1.884c1.23.386 1.954-.8 3.133-2.086a106.29 106.29 0 0 0 2.21-2.53c6.09.519 10.779-.668 11.309-.841 1.23-.404 8.192-1.308 9.32-10.65 1.168-9.629-.564-15.726-3.697-18.474Zm1.03 17.783c-.956 7.803-6.602 8.298-7.639 8.632-.444.144-4.557 1.182-9.73.836 0 0-3.857 4.702-5.059 5.93-.188.19-.41.27-.558.23-.205-.052-.262-.3-.262-.663.006-.518.034-6.425.034-6.425-.006 0-.006 0 0 0-7.531-2.115-7.093-10.073-7.007-14.24.085-4.166.86-7.577 3.156-9.87 4.13-3.78 12.636-3.216 12.636-3.216 7.183.034 10.624 2.218 11.422 2.95 2.649 2.3 3.999 7.791 3.008 15.836Z"/> <path fill="#fff" fill-rule="evenodd" d="M24.833 19.06a.482.482 0 0 1 .505-.46c.991.054 1.817.357 2.404.97.586.612.872 1.467.921 2.495a.484.484 0 0 1-.456.508.482.482 0 0 1-.503-.462c-.042-.88-.28-1.477-.652-1.865-.37-.386-.934-.63-1.765-.675a.484.484 0 0 1-.454-.511Z" clip-rule="evenodd"/> <path fill="#fff" fill-rule="evenodd" d="M24.104 16.449a.482.482 0 0 1 .513-.45c2.021.145 3.644.847 4.826 2.15 1.175 1.294 1.73 2.901 1.688 4.788a.483.483 0 0 1-.491.474.483.483 0 0 1-.47-.497c.038-1.663-.444-3.018-1.434-4.109-.983-1.083-2.357-1.706-4.187-1.838a.484.484 0 0 1-.445-.518Z" clip-rule="evenodd"/> <path fill="#fff" fill-rule="evenodd" d="M23.26 13.96a.483.483 0 0 1 .483-.482c2.787.018 5.148.96 7.037 2.823 1.904 1.884 2.85 4.439 2.874 7.622a.483.483 0 0 1-.477.49.483.483 0 0 1-.484-.482c-.022-2.983-.9-5.269-2.584-6.935-1.7-1.675-3.816-2.53-6.373-2.547a.483.483 0 0 1-.477-.489Z" clip-rule="evenodd"/> <path fill="#fff" d="M25.408 28.595s.678.058 1.037-.398l.706-.899c.342-.45 1.168-.731 1.977-.276.45.259 1.259.76 1.76 1.135.536.398 1.635 1.325 1.635 1.325.524.444.644 1.101.29 1.793 0 .005-.005.011-.005.011a7.433 7.433 0 0 1-1.475 1.838l-.012.012c-.507.426-1.008.674-1.498.732-.057.011-.131.017-.216.011-.217 0-.428-.029-.639-.098l-.017-.023c-.757-.213-2.016-.755-4.119-1.924a24.24 24.24 0 0 1-3.457-2.311 18.358 18.358 0 0 1-1.607-1.447l-.051-.052a12.431 12.431 0 0 1-.051-.051l-.052-.052c-.524-.536-.98-1.06-1.378-1.573a24.878 24.878 0 0 1-2.285-3.498c-1.156-2.127-1.692-3.4-1.903-4.167l-.022-.017a1.935 1.935 0 0 1-.097-.646.864.864 0 0 1 .011-.218c.057-.496.302-1.003.724-1.516l.011-.012a7.28 7.28 0 0 1 1.817-1.492c.006 0 .012-.006.012-.006.683-.357 1.333-.236 1.771.294.006.006.918 1.112 1.31 1.654.371.513.872 1.325 1.123 1.78.45.819.17 1.654-.273 2l-.89.715c-.45.369-.392 1.048-.392 1.048s1.322 5.054 6.255 6.328Z"/> </svg>';case"vk":return'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">  <path fill="#fff" fill-rule="evenodd" d="M41.119 16.981c.267-.796 0-1.381-1.27-1.381h-4.202c-1.068 0-1.56.505-1.827 1.063 0 0-2.137 4.658-5.163 7.683-.98.876-1.424 1.155-1.958 1.155-.267 0-.654-.279-.654-1.075v-7.445c0-.955-.31-1.381-1.2-1.381h-6.602c-.667 0-1.069.444-1.069.864 0 .905 1.514 1.114 1.67 3.663v5.533c0 1.214-.245 1.434-.78 1.434-1.424 0-4.888-4.68-6.943-10.033-.402-1.04-.806-1.461-1.88-1.461h-4.2c-1.201 0-1.441.505-1.441 1.063 0 .995 1.424 5.932 6.631 12.461C13.703 33.583 18.594 36 23.044 36c2.67 0 3.001-.537 3.001-1.462v-3.37c0-1.073.253-1.287 1.099-1.287.623 0 1.691.278 4.183 2.428C34.176 34.857 34.645 36 36.247 36h4.202c1.2 0 1.8-.537 1.454-1.596-.38-1.056-1.739-2.588-3.544-4.404-.979-1.035-2.448-2.15-2.892-2.707-.624-.717-.446-1.035 0-1.672 0 0 5.118-6.45 5.652-8.64Z" clip-rule="evenodd"/> </svg>';case"wechat":return'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">  <path fill="#fff" d="M19.5 9C12.044 9 6 13.99 6 20.143c0 3.548 2.02 6.694 5.155 8.731L9.375 32.4l4.849-2.057c1.04.366 2.12.666 3.274.807a9.24 9.24 0 0 1-.248-2.093c0-6.144 6.055-11.143 13.5-11.143.682 0 1.348.056 2.005.136C31.567 12.898 26.088 9 19.5 9ZM15 17.357a1.68 1.68 0 0 1-1.687-1.671A1.68 1.68 0 0 1 15 14.014a1.68 1.68 0 0 1 1.688 1.672A1.68 1.68 0 0 1 15 17.357Zm9 0a1.68 1.68 0 0 1-1.687-1.671A1.68 1.68 0 0 1 24 14.014a1.68 1.68 0 0 1 1.688 1.672A1.68 1.68 0 0 1 24 17.357Z"/> <path fill="#fff" d="M42 29.058c0-4.923-5.038-8.915-11.25-8.915S19.5 24.135 19.5 29.058c0 4.922 5.038 8.914 11.25 8.914 1.021 0 1.994-.143 2.936-.346l6.064 2.575-2.097-4.152C40.281 34.417 42 31.908 42 29.058ZM27.375 28.5a1.68 1.68 0 0 1-1.688-1.67 1.68 1.68 0 0 1 1.688-1.672 1.68 1.68 0 0 1 1.688 1.671 1.68 1.68 0 0 1-1.688 1.671Zm6.75 0a1.68 1.68 0 0 1-1.688-1.67 1.68 1.68 0 0 1 1.688-1.672 1.68 1.68 0 0 1 1.688 1.671 1.68 1.68 0 0 1-1.688 1.671Z"/> </svg>';case"skype":return'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">  <path fill="#fff" d="M39.267 28.041c.237-1.055.356-2.15.356-3.275 0-8.413-6.917-15.236-15.453-15.236-.898 0-1.78.079-2.644.223A9.01 9.01 0 0 0 16.76 8.4c-4.949 0-8.96 3.954-8.96 8.835 0 1.63.444 3.156 1.233 4.469a14.958 14.958 0 0 0-.315 3.062c0 8.418 6.917 15.241 15.452 15.241.967 0 1.915-.089 2.832-.258A9.01 9.01 0 0 0 31.24 40.8c4.949 0 8.96-3.954 8.96-8.834a8.728 8.728 0 0 0-.933-3.925Zm-7.173 4.009c-.71.996-1.766 1.789-3.138 2.348-1.352.555-2.98.838-4.825.838-2.22 0-4.085-.382-5.536-1.145a7.189 7.189 0 0 1-2.54-2.225c-.662-.931-.992-1.858-.992-2.755 0-.555.217-1.04.641-1.437.424-.396.967-.59 1.613-.59.533 0 .987.154 1.362.462.355.297.661.738.908 1.308.271.62.572 1.14.888 1.55.3.397.74.73 1.293.987.562.262 1.317.396 2.244.396 1.278 0 2.324-.267 3.114-.798.77-.515 1.144-1.14 1.144-1.902 0-.605-.197-1.075-.597-1.447-.42-.387-.977-.689-1.648-.897-.705-.213-1.662-.446-2.836-.694-1.604-.337-2.966-.738-4.051-1.194-1.11-.46-2.003-1.11-2.655-1.912-.666-.818-.996-1.849-.996-3.058 0-1.15.35-2.19 1.05-3.082.687-.886 1.698-1.58 3-2.056 1.278-.466 2.808-.703 4.53-.703 1.381 0 2.595.158 3.606.47 1.022.313 1.88.734 2.556 1.254.68.525 1.184 1.085 1.5 1.665.32.59.483 1.174.483 1.739 0 .545-.212 1.035-.631 1.471-.424.432-.962.65-1.589.65-.572 0-1.021-.134-1.332-.407-.291-.252-.592-.644-.923-1.209-.384-.723-.853-1.293-1.386-1.694-.518-.387-1.391-.585-2.58-.585-1.11 0-2.008.218-2.68.65-.646.415-.957.896-.957 1.46 0 .348.1.64.306.888.222.262.533.495.923.688.41.204.824.362 1.243.476.43.12 1.15.293 2.141.52 1.249.263 2.398.555 3.415.878 1.026.327 1.919.723 2.644 1.189a5.216 5.216 0 0 1 1.742 1.813c.42.733.626 1.635.626 2.686a5.671 5.671 0 0 1-1.08 3.404Z"/> </svg>';case"instagram":case"instagram_business":return'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">    <path stroke="#fff" stroke-width="3" d="M30 10.2H18a7.8 7.8 0 0 0-7.8 7.8v12a7.8 7.8 0 0 0 7.8 7.8h12a7.8 7.8 0 0 0 7.8-7.8V18a7.8 7.8 0 0 0-7.8-7.8Z"/> <path stroke="#fff" stroke-width="2" d="M24 30.6a6.6 6.6 0 1 0 0-13.2 6.6 6.6 0 0 0 0 13.2Z"/> <path fill="#fff" d="M32.357 17.314a1.671 1.671 0 1 0 0-3.342 1.671 1.671 0 0 0 0 3.342Z"/> </svg>';case"whatsapp":return'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">  <path fill="#fff" d="M40.8 23.567c0 9.04-7.384 16.367-16.495 16.367-2.892 0-5.609-.739-7.973-2.036L7.2 40.8l2.977-8.782a16.194 16.194 0 0 1-2.367-8.45c0-9.04 7.385-16.368 16.495-16.368 9.112 0 16.495 7.328 16.495 16.367ZM24.305 9.807c-7.647 0-13.867 6.173-13.867 13.76 0 3.011.981 5.8 2.641 8.068l-1.732 5.11 5.329-1.693a13.86 13.86 0 0 0 7.63 2.276c7.646 0 13.867-6.172 13.867-13.76S31.953 9.807 24.305 9.807Zm8.33 17.53c-.102-.167-.371-.268-.775-.468-.405-.2-2.393-1.172-2.763-1.305-.37-.134-.641-.201-.91.2-.27.402-1.044 1.305-1.28 1.573-.237.268-.472.302-.877.1-.404-.2-1.706-.624-3.25-1.99-1.203-1.063-2.014-2.376-2.25-2.778-.236-.401-.025-.618.177-.818.182-.18.405-.468.607-.703.203-.234.27-.4.404-.669.135-.268.068-.502-.034-.703-.1-.2-.91-2.175-1.247-2.978-.337-.803-.673-.67-.91-.67-.235 0-.505-.033-.774-.033-.27 0-.708.1-1.079.502-.37.402-1.414 1.372-1.414 3.346s1.448 3.882 1.65 4.15c.203.267 2.797 4.45 6.907 6.056 4.111 1.605 4.111 1.07 4.852 1.002.741-.066 2.392-.97 2.73-1.906.336-.938.336-1.74.236-1.908Z"/> </svg>';case"amocrm_applebm":return'<svg width="30" height="27" viewBox="0 0 30 27" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 0.5C7.1376 0.5 0.763885 5.8603 0.763885 12.4727C0.763885 16.6803 3.2229 20.1786 7.04347 22.4022C8.25067 23.105 7.12853 24.5318 6.07531 25.6553C5.51379 26.2544 5.60194 26.4402 6.33467 26.2534C10.0081 25.3164 10.113 23.8165 11.7692 24.1357C12.8078 24.3358 13.8887 24.4454 15 24.4454C22.8624 24.4454 29.2361 19.0851 29.2361 12.4727C29.2361 5.8603 22.8622 0.5 15 0.5Z" fill="white"/> </svg>';default:return'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">\t<path fill="#fff" stroke="#fff" stroke-miterlimit="10" stroke-width=".25" d="m40.9 33.4-2.2-6.5c1.2-2.1 1.8-4.4 1.8-6.7 0-7.5-6.1-13.7-13.7-13.7-5.3 0-10.2 3.1-12.4 8-4.2 2.3-7 6.8-7 11.9 0 2.4.6 4.7 1.8 6.7L7 39.8c0 .2 0 .4.2.5.1.1.3.2.4.2h.1l7.2-1.9c1.9 1 4 1.5 6.2 1.5 5.4 0 10-3.1 12.2-7.6l6.9 1.8h.1c.3 0 .6-.3.6-.6.1-.1.1-.2 0-.3Zm-19.8 5.5c-1.5 0-2.9-.3-4.3-.8-1-.4-1.3-.6-1.5-.7 0 0-.2-.1-.5 0l-6.4 1.7 2-5.9c.1-.2 0-.3-.1-.5-1.1-1.9-1.8-4.1-1.8-6.4 0-4.9 2.8-9.2 6.9-11.2.1 0 .1-.1.2-.1.1-.1.2-.1.4-.2.1 0 .2-.1.3-.1.1 0 .2-.1.3-.1.2-.1.3-.1.5-.2.1 0 .1 0 .2-.1.2-.1.5-.1.7-.2.2-.1.4-.1.7-.1h.1c.2 0 .4-.1.6-.1h.2c.2 0 .4 0 .5-.1h.9c6.9 0 12.5 5.6 12.5 12.5v2c0 .1 0 .2-.1.4 0 .1 0 .2-.1.3 0 .1-.1.2-.1.3 0 .1 0 .2-.1.3 0 .1-.1.2-.1.3 0 .1-.1.2-.1.3 0 .1-.1.2-.1.3 0 .1-.1.2-.1.4 0 .1-.1.2-.1.2 0 .1-.1.2-.1.4-1.9 4.3-6.3 7.4-11.4 7.4Zm12.7-7.5c.2-.4.3-.8.4-1.1 0-.1 0-.1.1-.2.1-.4.2-.7.3-1.1v-.2c.1-.4.1-.7.2-1.1v-.1c0-.4.1-.8.1-1.2 0-7.5-6.1-13.7-13.7-13.7-.4 0-.8 0-1.2.1h-.1c-.4 0-.8.1-1.2.2h-.1c-.4.1-.8.2-1.1.3h-.1c-.4.1-.7.2-1 .3h-.1c2.3-3.7 6.3-6 10.7-6 6.9 0 12.5 5.6 12.5 12.5 0 2.2-.6 4.5-1.8 6.4-.1.1-.1.3-.1.5l2 5.9-5.8-1.5Z"/> <path fill="#fff" d="M17 30.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM21.5 30.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM26 30.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"/> <path fill="#fff" stroke="#fff" stroke-miterlimit="10" stroke-width=".1" d="M30.6 22c-1.8-3.2-5.1-5.5-8.7-5.9-.3 0-.6.2-.6.5s.2.6.5.6c3.3.4 6.3 2.4 7.9 5.3.1.2.3.3.5.3.1 0 .2 0 .3-.1.1 0 .2-.4.1-.7Z"/> </svg>'}}(n),"</div>",3===this.getVersion()?'<svg class="amo-button--close-icon" width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.33274 11.3695L2.46267 18.2395C1.89896 18.8032 0.98461 18.8057 0.42219 18.2433C-0.144151 17.677 -0.138549 16.7673 0.42597 16.2028L7.29603 9.33276L0.42597 2.46267C-0.137747 1.89896 -0.14023 0.984599 0.42219 0.422179C0.988531 -0.144162 1.89816 -0.138538 2.46267 0.425981L9.33274 7.29605L16.2028 0.425981C16.7666 -0.137736 17.6809 -0.140241 18.2433 0.422179C18.8097 0.98852 18.8041 1.89816 18.2395 2.46267L11.3694 9.33276L18.2395 16.2028C18.8033 16.7665 18.8057 17.6809 18.2433 18.2433C17.677 18.8097 16.7674 18.804 16.2028 18.2395L9.33274 11.3695Z" />/svg>':"","</div>","</div>"].join(""),t.is_fixed&&(e.style.zIndex=this.getZIndexForElement("mainHolder")),this.parent_node.appendChild(e),e},B.prototype.renderMainButton=function(t){var e=t.holder.querySelector(".js-amo-button");return this.setBackgroundColor(e,this.getButtonColor()),this.setBorderRadius(e,this.getButtonRadius()),e.style.float=""===t.is_fixed?"left":t.position.h,this.user_config.hidden&&(e.style.display="none"),e},B.prototype.setBackgroundColor=function(t,e){t.style.backgroundColor=e},B.prototype.setBorderRadius=function(t,e){t.style.borderRadius=e+"px"},B.prototype.setBorderColor=function(t,e){3===this.getVersion()&&(t.style.borderColor=e,t.style.fill=e)},B.prototype.renderBrand=function(t){var e=this.document.createElement("div"),n=kn(),i=this.langs[this.lang_id].made_by+" "+this.settings.brandName;return"es"===this.lang_id&&(n+="/es/"),e.className="amo-brand",e.id="amo_brand",e.style.width=t.size+(this.meta_params.inline?7:0)+"px",e.innerHTML='<p class="amo-brand__link-holder"><a target="_blank" href="'+n+'" class="amo-brand__link">'+i+"</a></p>",t.holder.appendChild(e),e},B.prototype.setHolderPadding=function(t){if(!this.meta_params.inline&&2===t.orientation){var e=7+(t.size+10)*this.services_count+"px";switch(t.position.v){case"top":t.holder.style.paddingBottom=e;break;case"bottom":t.holder.style.paddingTop=e}}},B.prototype.resetHolderPadding=function(t){if(2===t.orientation)switch(t.position.v){case"top":t.holder.style.paddingBottom="0px";break;case"bottom":t.holder.style.paddingTop="0px"}},B.prototype.setOrientation=function(t,e){if(this.isOnlyOneButton())t.style.top="7px",t.style.left="7px";else if(2===e.orientation){var n=(this.meta_params.inline?-15:e.size-5)+"px",i=this.meta_params.inline?"-4px":0;switch(e.position.v){case"top":t.style.top=n,t.style.bottom="inherit","right"===e.position.h?(t.style.right=i,t.style.left="inherit"):(t.style.left=i,t.style.right="inherit");break;case"bottom":t.style.top="inherit",t.style.bottom=n,"right"===e.position.h?(t.style.right=i,t.style.left="inherit"):(t.style.left=i,t.style.right="inherit")}}else{switch("bottom"===e.position.v&&(t.style.top="auto",t.style.bottom=this.meta_params.inline?"-25px":"-20px"),e.position.v){case"bottom":t.style.top="auto",t.style.bottom=this.meta_params.inline?"-25px":"-20px";break;case"top":t.style.top=this.meta_params.inline&&"-4.5px"}var o=this.meta_params.inline?"-33px":e.size-15+"px";switch(e.position.h){case"left":t.style.left=o,t.style.right="inherit";break;case"right":t.style.left="inherit",t.style.right=o}}},B.prototype.setPosition=function(t){if(t.holder.style[t.position.h]=t.position.x+"px",t.holder.style[t.position.v]=t.position.y+"px",this.meta_params.inline){var e,n=0;for(e in this.settings.social_services)"livechat"===this.settings.social_services[e].type&&(n=e);var i=t.holder.querySelector(".amo-button--main");i.style.pointerEvents="none",i.style.backgroundColor="transparent",1===t.orientation?i.style[t.position.h]=(t.size+4)*n-7+"px":i.style[t.position.v]=(t.size+4)*n-7+8+"px"}},B.prototype.checkIfFormsNeeds=function(){0!==parseInt(this.settings.button.form)&&this.renderForms()},B.prototype.renderForms=function(){var t=this.getFormData();this.insertForms(t)},B.prototype.render_frame=function(){var e,n=this,t=n.settings.button.is_fixed,i=n.document.createElement("iframe"),o=n.document.createElement("div"),r=n.document.createElement("div"),s=n.server_host+"/buttons/html/"+n.hash+".html?"+n.settings.date_update,a=n.settings.button.button_position.split("-"),c=kn();if("es"===n.lang_id&&(c+="/es/"),o.className="amo-button-holder "+(2===n.orientation?"amo-vertical":"amo-horisontal"),o.style.position=t?"fixed":"absolute",o.innerHTML='<div class="amo-button amo-button--main js-amo-button" id="amobutton" style="width:'+n.settings.button.button_size+"px; height:"+n.settings.button.button_size+'px"></div>',t&&(o.style.zIndex=parseInt($i())),n.parent_node.appendChild(o),n.button_holder=o,e=o.querySelector(".js-amo-button"),n.settings.button.hasOwnProperty("color")&&(e.style.backgroundColor=n.settings.button.color),e.style.float=""===n.settings.button.is_fixed?"left":a[1],this.setFrame(i,s,1),o.insertBefore(i,o.children[0]),o.style.height=n.soc_frame.height+"px",2===this.orientation)switch(a[0]){case"top":o.style.paddingBottom=7+(n.settings.button.button_size+10)*n.services_count+"px";break;case"bottom":o.style.paddingTop=7+(n.settings.button.button_size+10)*n.services_count+"px"}r.className="amo-brand",r.id="amo_brand",n.brand_holder=r,1===n.orientation&&(r.style[t?a[1]:"left"]="7px"),r.innerHTML='<p class="amo-brand__link-holder" style="float: '+(t?a[1]:"left")+'">'+n.langs[n.lang_id].made_by+' <a target="_blank" href="'+c+'" class="amo-brand__link">amoCRM</a></p>',o.appendChild(r),2===n.orientation&&n.setVerticalBrandPos(a),"Y"===n.settings.button.is_fixed?(o.style[a[1]]=(""===n.settings.button.horisontal_position?0:n.settings.button.horisontal_position)+"px",o.style[a[0]]=(""===n.settings.button.vertical_position?0:n.settings.button.vertical_position)+"px","right"==a[1]&&i.setAttribute("style","right:0; left: inherit")):2===n.orientation&&(o.style.bottom=0),i.onload=function(){n.set_social(n.settings),n.initApiMeta(),S.add({target:e,eventName:"click",handler:function(t){return t.stopPropagation(),n.onButtonClickV1(e,r),!1}}),n.checkIfFormsNeeds()}},B.prototype.initApiMeta=function(){var n=this;if(n.meta_params.setMeta=function(t){var e=n.window.frames.social_iframe;"object"==typeof t&&Object.assign(n.bot_params,t.bot_params||{}),e.postMessage({method:"send_meta",payload:{metaData:t}},"*")},n.meta_params.params){for(var t in n.meta_params.params)n.meta_params.setMeta(n.meta_params.params[t]);delete n.meta_params.params}AMO_PIXEL_CLIENT.configure({baseURL:n.server_host,id:n.id,hash:n.hash});var o=AMO_PIXEL_CLIENT.extractTrackingParamsFromUrl();AMO_PIXEL_CLIENT.extractTrackingParamsFromTrackers(function(t){var i=[];t.forEach(function(t){0<t.length&&t.forEach(function(t){t.key&&t.value&&i.push({field_code:t.key.toUpperCase(),values:[{value:t.value}]})})}),Object.keys(o).map(function(t,e){var n=o[t];i.push({field_code:t.toUpperCase(),values:[{value:n}]})}),0<i.length&&n.meta_params.setMeta({lead:{custom_fields_values:i}})})},B.prototype.onButtonClickV1=function(t,e){var n=this,i=this.getParamToNull();this.collapsed?(this.collapsed=!1,this.soc_frame.elem[i]=this.soc_frame[i],t.classList.add("maincollapsed"),e.classList.add("collapsed")):(this.collapsed=!0,t.classList.remove("maincollapsed"),e.classList.remove("collapsed"),this.is_form_shown&&this.hideForm(),setTimeout(function(){!0===n.collapsed&&(n.soc_frame.elem[i]=0)},1e3)),this.soc_frame.elem.contentWindow.postMessage({method:"button:click",payload:{showSocials:!this.collapsed}},"*")},B.prototype.getParamToNull=function(){return 1===parseInt(this.orientation)?"width":"height"},B.prototype.setFrame=function(t,e,n,i){void 0===i&&(i={});var o=this.isOnlyOneButton(),n=(this.soc_frame={},this.soc_frame.elem=t,this.setSizes(n),this.langs[this.lang_id]["%brand% CRM Plugin social network list"]);t.id="social_iframe",t.setAttribute("name","social_iframe"),t.setAttribute("title",n.replace("%brand%",this.settings.brandName)),t.src=e,t.scrolling="no",t.className="amo-button__iframe",o&&"livechat"!==o&&(t.style.opacity=0),i.is_fixed&&(t.style.zIndex=this.getZIndexForElement("socialIFrame"))},B.prototype.isFirstSourceApple=function(){var t=Object.keys(this.settings.social_services).length;return this.settings.social_services[t-1].type===Mn},B.prototype.setSizes=function(t){var e=this.isOnlyOneButton();3===t&&e&&"livechat"!==e?this.setOnlySizes():(1===t?2===parseInt(this.orientation):2===parseInt(this.settings.button.orientation))?this.setVerticalSizes(t):this.setHorisontalSizes(t)},B.prototype.setOnlySizes=function(){this.soc_frame.width=this.settings.button.size,this.soc_frame.height=this.settings.button.size,this.soc_frame.elem.width=this.settings.button.size,this.soc_frame.elem.height=this.settings.button.size},B.prototype.setVerticalSizes=function(t){var e=this.services_count,n=this.meta_params.inline?this.settings.button.size+10:this.settings.button.size;1===t?(this.soc_frame.width=this.settings.button.button_size+14,this.soc_frame.height=this.settings.button.button_size+14+(this.settings.button.button_size+10)*e,this.soc_frame.elem.width=this.soc_frame.width):(this.soc_frame.width=n+100,this.soc_frame.height=(n-6)*e+40,this.soc_frame.elem.width=this.soc_frame.width,this.soc_frame.elem.style.minWidth=this.soc_frame.width+"px"),this.soc_frame.elem.height=0},B.prototype.setHorisontalSizes=function(t){var e,n,i,o,r=this.services_count,s=this.makePositionParams(),a="bottom"===s.v?36:38,c=this.meta_params.inline?this.settings.button.size+4:this.settings.button.size-10+4;1===t?(this.soc_frame.width=this.settings.button.button_size+14+(this.settings.button.button_size+10)*r,this.soc_frame.height=this.settings.button.button_size+14+20,this.soc_frame.elem.width=0,this.soc_frame.elem.height=this.soc_frame.height):(3===t?(t=this.settings.button.size+4,this.meta_params.inline||(t-=10),i=this.isFirstSourceApple()?23:15,o=this.meta_params.inline?0:this.settings.button.size,o=window.innerWidth-s.x-o-29-i,e=Math.min(t*r+29+i,o),n=Math.floor(e/t),e===o&&(o=Math.floor((e+i)/t),e+=29,n===o)&&(e+=i)):(e=Math.min((this.settings.button.size-6)*r+40,window.innerWidth-s.x-this.settings.button.size-15),this.meta_params.inline&&(e+=this.settings.button.size),n=Math.floor(e/this.settings.button.size)),this.soc_frame.width=e,this.soc_frame.height=Math.ceil(Object.keys(this.settings.social_services).length/n)*c+a,this.soc_frame.elem.width=0,this.soc_frame.elem.height=this.soc_frame.height,this.soc_frame.elem.style.minHeight=this.soc_frame.height+"px")},B.prototype.set_social=function(t){var e=this;this.session_uid=AMO_PIXEL_CLIENT.getSessionUid(),this.session_id=AMO_PIXEL_CLIENT.getShortSessionId(),t.locale=this.locale,t.button.id=this.id,t.button.hash=this.hash,t.session_uid=this.session_uid,t.session_id=this.session_id,t.metadata=AMO_PIXEL_CLIENT.makeMetadata(),t.link=AMO_PIXEL_CLIENT.getTrackingLink(),t.disable_titles=this.disable_titles,t.isMobile=this.isMobileDevice(),this.window.frames.social_iframe.postMessage({method:"set_social",payload:{data:t}},"*"),this.socialFrameReady=!0,this.keyactionsAwaited.forEach(function(t){return e.sendCRMReactions(t)}),this.keyactionsAwaited=[]},B.prototype.setVerticalBrandPos=function(t){var e=this.brand_holder,n=e.offsetWidth,i=t[1],t=t[0];if(e.style[t]="7px","bottom"===t)switch(i){case"left":e.style.left="-3px",e.className+=" amo-brand--bl";break;case"right":e.style.bottom="-10px",e.style.right="-"+(n+3)+"px",e.className+=" amo-brand--br"}else if("top"===t)switch(i){case"left":e.style.top="-10px",e.style.left="-"+(n+3)+"px",e.className+=" amo-brand--tl";break;case"right":e.style.right="-3px",e.className+=" amo-brand--tr"}},B.prototype.insertForms=function(t){var e=document.createElement("script"),n=this.createFormWrapper();window.amo_forms_params=t||{},e.id="amoforms_script",e.src=this.forms_host,n.appendChild(e),this.addClicksListener()},B.prototype.setupContactForHuman=function(t){(t=AMO_PIXEL_CLIENT.canSetupContactForHuman(t))&&this.window.frames.social_iframe.postMessage({method:"setup_contact_for_human",payload:{contactId:t}},"*")},B.prototype.addClicksListener=function(){var e=this;S.add({target:window,eventName:"message",handler:function(t){e.onMessage(t)}})},B.prototype.onMessage=function(t){var e,n=this,i=t.data;try{i=JSON.parse(i)}catch(t){}switch(!0){case"click_button"===i:this.meta_params.inline?(n.livechat.hide(),document.querySelector(".amo-button--main").style.pointerEvents="none",this.window.frames.social_iframe.postMessage({method:"livechat:click"},"*")):document.getElementById("amobutton").click(),k("onChatHide"),this.soc_frame.elem.style.zIndex=this.getZIndexForElement("socialIFrame");break;case"livechat:show"===i:n.livechat.show(),this.meta_params.inline&&(e=document.querySelector(".amo-button--main"),this.setBorderColor(e,"white"===this.settings.button.theme?this.getButtonColor():"#FFF"),this.setBackgroundColor(e,this.settings.button.theme),e.querySelector(".amo-button--close-icon").style.display="block",e.style.pointerEvents=""),this.isMobileDevice()&&(this.soc_frame.elem.style.zIndex="");break;case"livechat:hide"===i:n.livechat.hide(),this.meta_params.inline&&(e=document.querySelector(".amo-button--main"),this.setBorderColor(e,"transparent"),this.setBackgroundColor(e,"transparent"),e.querySelector(".amo-button--close-icon").style.display="",e.style.pointerEvents="none");break;case"click_form"===i:n.showForm();break;case"pixel_ready"===i:n.initLivechat(),Ln=!0,Tn.forEach(function(t){return Nn.apply(void 0,t)});break;case!("object"!=typeof i||!i.func||"buttonClick"!==i.func||!i.service):k("onButtonClick",i.service,i.link);break;case 1===this.getVersion()&&!("object"!=typeof i||!i.func||"resizeForm"!==i.func||!i.height):n.resizeFormFrame(i.height);break;case"livechat:rendered"===i.method:n.sendOnlyStaticLoadTime?n.sendOnlyStaticLoadTime():n.chat_frame_ready=!0}},B.prototype.resizeFormFrame=function(t){this.form_wrapper.style.height=t+"px",this.setFormPosition(t)},B.prototype.showForm=function(){var e=this,t="amo-form-wrapper_shown";this.form_wrapper.classList?this.form_wrapper.classList.add(t):this.form_wrapper.className+=" "+t,e.is_form_shown=!0,S.add({target:document,eventName:"click",handler:function(t){e.hideForm(t)}})},B.prototype.hideForm=function(){var t="amo-form-wrapper_shown";this.form_wrapper.classList?this.form_wrapper.classList.remove(t):this.form_wrapper.className=this.form_wrapper.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "),this.is_form_shown&&(this.is_form_shown=!1)},B.prototype.getFormData=function(){var t,e=this.settings.social_services,n={};for(t in e)if("form"===e[t].type){n={id:e[t].id,hash:e[t].link,locale:this.locale,type:"gso"};break}return n},B.prototype.createFormWrapper=function(){var t=document.createElement("div"),e="306px",n="500px";return t.style.width=e,t.style.height=n,t.className="amo-form-wrapper",this.form_wrapper=t,this.button_holder.appendChild(t),t},B.prototype.setFormPosition=function(t){var e=this,n=e.settings.button.button_position.split("-");2===e.orientation?(e.form_wrapper.style[n[1]]=e.soc_frame.width+10+"px",e.form_wrapper.style[n[0]]=0):1===e.orientation&&(e.form_wrapper.style[n[0]]=e.soc_frame.height+10+"px",e.form_wrapper.style[n[1]]=0)},B.prototype.initModal=function(t){this.modal=new T({container:t.holder,brandName:this.settings.brandName,host:this.server_host})},B.prototype.initFormModal=function(t){this.form_modal=new si({amoforms_url:this.forms_host,button_holder:t.holder})},B.prototype.initKeyActions=function(e){var n=this;void 0===e&&(e={}),this.keyactions=new L({keyactions:this.settings.keyactions,sendCRMReactions:function(t){return n.sendCRMReactions(t)},showForm:function(t,e){return n.form_modal.show({id:t,hash:e})},showGreeting:function(){n.livechat?n.livechat.showGreeting():n.greetingAwaited=!0},showAnimation:function(t){n.collapsed&&(n.hideAnimation(e.button),n.displayAnimation({animation:t,button:e.button}),setTimeout(function(){n.hideAnimation(e.button),n.displayAnimation({animation:n.getAnimation(),button:e.button})},2e3))}})},B.prototype.sendCRMReactions=function(t){this.socialFrameReady?this.window.frames.social_iframe.postMessage({method:"send_keyaction",payload:{keyaction_id:t}},"*"):this.keyactionsAwaited.push(t)},B.prototype.initLivechat=function(){var t,n=this,e=this;if(!this.livechat&&3===this.getVersion()){var i=document.getElementById("amobutton"),o={};for(t in this.settings.social_services){var r=this.settings.social_services[t];"livechat"===r.type&&(o=r)}this.livechat=new x({config:this.user_config.onlinechat||{},host:this.server_host,socket_url:o.link,site_id:o.id,session_uid:this.session_uid,session_id:this.session_id,container:i,enabled:o.id,account_name:o.account_name,position:this.makePositionParams(),orientation:2===parseInt(this.settings.button.orientation)?"vertical":"horizontal",button:{id:this.settings.button.id,hash:this.settings.button.hash,color:this.getButtonColor()},locale:this.lang_id,greeting:this.settings.greeting,greeting_bot_params:this.bot_params,has_keyactions:0<Object.keys(this.settings.keyactions).length,has_greeting_reaction:0<Object.keys(this.settings.keyactions).filter(function(e){return n.settings.keyactions[e].reactions&&0<Object.keys(n.settings.keyactions[e].reactions).filter(function(t){return"amobutton_greeting"===n.settings.keyactions[e].reactions[t].action}).length}).length,modal:this.modal,forceButtonCollapse:!this.meta_params.inline&&this.forceButtonCollapse,isButtonOpened:function(){return!e.collapsed},isInline:this.meta_params.inline,isCopyrightVisible:!1!==this.settings.is_copyright_visible,servicesCount:this.services_count,serviceSize:this.settings.button.size-10,brandName:this.settings.brandName,onIframeLoaded:function(){e.meta_params.inline&&1<this.services_count?i.click():i.style.opacity="1"}.bind(this)}),this.greetingAwaited&&this.livechat.showGreeting()}},B.prototype.destroy=function(){S.removeAll(),S.stop(),this.buttonHolderEl&&this.buttonHolderEl.remove(),this.livechat&&this.livechat.destroy();window.AMO_PIXEL_CLIENT&&window.AMO_PIXEL_CLIENT.destroy(),window.AMOPIXEL_IDENTIFIER&&window.AMOPIXEL_IDENTIFIER.destroy(),["amoSocialButton","crmPlugin","amo_social_button","crm_plugin","amoSocialButtonConfig","crmPluginConfig"].forEach(function(e){try{delete window[e]||(window[e]=void 0)}catch(t){window[e]=void 0}})},new B(window.amo_social_button||window.crm_plugin||{})}();
